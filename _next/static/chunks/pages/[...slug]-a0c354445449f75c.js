(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{33914:function(e,t,n){"use strict";var o=n(4730),i=n(59499),r=n(67294),s=n(4480),a=n(52260),l=n(60864),d=n(87495),c=n(85893);const p=["type","preview"],u=["attrs","content"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h={bulletList:"ul",doc:"div",heading:e=>{let{level:t,children:n}=e;const o=`h${t}`;return(0,c.jsx)(o,{children:n})},listItem:"li",orderedList:"ol",paragraph:"p",hardBreak:"br",text:e=>{let{marks:t,text:n,preview:o}=e;const i=(0,s.Zl)(l.Vx),p=(0,s.Zl)(a.R),u=(0,r.useCallback)((e=>{e.stopPropagation();const{isTomeLink:t,tomeId:n,pageId:o}=(0,d.vb)(e.target.href);if(t){const{isTomeLink:t,tomeId:r}=(0,d.vb)(window.location.href);t&&r===n&&(i(o),e.preventDefault(),p(!0))}}),[i,p]);if(t){const e=[],i=[];t.forEach((t=>{switch(t.type){case"bold":e.push("strong"),i.push({});break;case"italic":e.push("em"),i.push({});break;case"underline":e.push("u"),i.push({});break;case"code":e.push("code"),i.push({});break;case"link":e.push("a"),o?i.push({}):i.push({href:t.attrs.href,target:"_blank",onPointerDownCapture:u})}}));let r=n;for(let t=e.length-1;t>=0;t-=1){const n=e[t];r=(0,c.jsx)(n,m(m({},i[t]),{},{children:r}))}return r}return n},mentionAtom:"span",blockquote:"blockquote"},f=e=>{let{type:t,preview:n}=e,i=(0,o.Z)(e,p);const r=h[t];if(!r)return console.warn("Unknown node type:",t),null;const{attrs:s={},content:a=[]}=i,l=(0,o.Z)(i,u);return"text"===t?(0,c.jsx)(r,{marks:l.marks,text:l.text,preview:n}):"hardBreak"===t?(0,c.jsx)(r,{}):"paragraph"===t&&0===a.length?(0,c.jsx)(r,{children:(0,c.jsx)("br",{})}):"mentionAtom"===t?(0,c.jsx)(r,{className:"remirror-mention-atom-mention-atom",children:s.label}):(0,c.jsx)(r,m(m(m({},s),l),{},{children:(0,c.jsx)(c.Fragment,{children:a.map(((e,t)=>(0,c.jsx)(f,m({preview:n},e),t)))})}))};t.Z=f},81226:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return Zs},config:function(){return Ns},default:function(){return Es}});var o=n(64310),i=n(67294),r=n(4480),s=n(11163),a=n(63319),l=n(87495),d=n(51718),c=n(52322),p=n(93313),u=n(71652),g=n(76610),m=n(24418),h=n(7863),f=n(59016),b=n(1922),x=n(41822),v=n(33820),y=n(41664),w=n.n(y),j=n(55245),C=n(8423),P=n(85893);var _=e=>{let{email:t}=e;const n=(0,s.useRouter)();return(0,P.jsx)(C.Z,{mainMessage:"Oops! You need an invitation before you can use Tome.",children:(0,P.jsxs)(C.N,{children:["Signed in as ",t||"",". ",(0,P.jsx)("br",{}),(0,P.jsx)(w(),{href:(0,j.bM)(n),children:"Sign\xa0in"})," with a different account."]})})},O=n(87174),I=n(36948),T=n(3853),k=n(26188),S=n(65309),Z=n(43002),E=n(22817),N=n(33159),M=n(60864),L=n(37189),D=n(49335),R=n(39225),B=n(59499),z=n(37887),A=n(24306);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U,$=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,H(H({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.47 16.7833C52.1767 17.0752 51.7026 17.0752 51.4093 16.7833L47.2186 12.6069C46.9267 12.3164 46.9254 11.8444 47.2158 11.5524C47.2168 11.5515 47.2177 11.5506 47.2186 11.5497L50.1133 8.66156C50.9932 7.78566 52.4155 7.78566 53.2954 8.66156L55.3646 10.7236C56.2404 11.5954 56.2437 13.0122 55.3719 13.888C55.3695 13.8904 55.367 13.8929 55.3646 13.8953L52.47 16.7833ZM29.7581 38.49L24.7119 40.0052C24.4144 40.0943 24.101 39.9253 24.0119 39.6278C23.9804 39.5226 23.9804 39.4104 24.0119 39.3052L25.5267 34.2512H25.5267C25.8118 33.3 26.3283 32.4343 27.03 31.7318L44.5332 14.2154C44.826 13.9229 45.3004 13.9229 45.5932 14.2154L49.7808 18.4065C50.0735 18.6996 50.0735 19.1743 49.7808 19.4675L32.2785 36.9832C31.5761 37.6864 30.7101 38.2042 29.7581 38.49ZM52.01 29.02V46.0209V46.0208C52.007 49.3335 49.3229 52.0187 46.0101 52.023H18.0101H18.0101C14.6973 52.0187 12.0132 49.3336 12.0101 46.0209V18.0146V18.0147C12.0131 14.7019 14.6973 12.0168 18.01 12.0126H35.01C36.115 12.0126 37.0107 12.9083 37.0107 14.0133C37.0107 15.1182 36.115 16.014 35.01 16.014H18.01C16.9057 16.0152 16.0109 16.9103 16.01 18.0146V46.0209V46.0209C16.0109 47.1251 16.9057 48.0202 18.01 48.0215H46.01C47.1142 48.02 48.0088 47.125 48.01 46.0209V29.02C48.01 27.9154 48.9054 27.02 50.01 27.02C51.1146 27.02 52.01 27.9154 52.01 29.02L52.01 29.02Z",fill:"currentColor"})})))),G=n(34136),W=n(71515),q=n(22951),V=n(37308),K=n(4034),Q=n(78724);!function(e){e.MAX_FREE_TOMES_COUNT_REACHED="MAX_FREE_TOMES_COUNT_REACHED"}(U||(U={}));var J=()=>{const{activeMembership:e}=(0,i.useContext)(k.Z),{t:t}=(0,b.$G)(),n=(0,s.useRouter)(),o=(0,r.Zl)(M.DH),{controlCommandPrompt:a}=(0,Q.br)(),l=(0,K.t2)(),{maybeIncrementFreeTomeCreationCount:p}=(0,D.Z)(),[u,{loading:g}]=(0,d.vtp)({update(e,t){let{data:n}=t;null!==n&&void 0!==n&&n.addEmptyTome&&(0,V.a)(e,n.addEmptyTome,p)},onError:e=>{const n=e.graphQLErrors.map((e=>{var t;return null===(t=e.extensions)||void 0===t?void 0:t.code})).filter((e=>!!e));m(!1),n.find((e=>e===U.MAX_FREE_TOMES_COUNT_REACHED))?(0,M.Sd)({message:t("toastMessages.tomeCreationError.disabledBecauseOutOfFreeTomes")}):(0,M.Sd)({message:t("createTomeButton.genericTomeCreateErrorToastMessage")})},onCompleted:e=>{let{addEmptyTome:t}=e;null!==t&&void 0!==t&&t.id&&((0,M.oG)(!1),o(null),l.closePropertyPanel(),n.push({pathname:`/${t.id}/`},void 0,{shallow:!0}))}}),m=(0,r.Zl)(c.Z);return(0,i.useCallback)((()=>{var t;!g&&e&&null!==e&&void 0!==e&&null!==(t=e.org)&&void 0!==t&&t.id&&(m(!0),u({variables:{title:R.GW,orgId:e.org.id,fetchFullPage:!0,prefetchPreviewImage:!1}}).then((()=>{a({action:Q.$C.OPEN})})))}),[g,e,m,u,a])};const X=(0,f.ZP)(G.Z).withConfig({displayName:"CreateTomeButton__StyledTomeButton",componentId:"sc-1jdmvr1-0"})(["justify-content:flex-start;height:32px;font-weight:600;padding-left:14px;padding-right:16px;min-width:0;"," span{opacity:",";border-radius:8px;}"],q.qc,(e=>{let{$disabled:t}=e;return t?.4:void 0}));var Y=()=>{const{remainingTomeCreationsForOrg:e}=(0,D.Z)(),{activeMembership:t}=(0,i.useContext)(k.Z),n=J(),{t:o}=(0,b.$G)(),r=(0,f.Fg)(),s=0===e;let a;!(null!==t&&void 0!==t&&t.org)?a=o("createTomeButton.disabledLabel"):s&&(a=o("toastMessages.tomeCreationError.disabledBecauseOutOfFreeTomes"));const l=!!a,d=(0,P.jsx)(X,{disabled:l,size:"large",color:"primary",customButtonPalette:{disabled:r.colors.workspaceCreateTomeButtonDisabled},iconOpacity:1,startIcon:(0,P.jsx)($,{}),onClick:n,"aria-label":o("createTomeButton.ariaLabel"),"data-testid":"create_tome_button",$disabled:l,children:o("createTomeButton.label")});return l?(0,P.jsx)(W.Z,{tooltipStyle:{width:"205px",overflowWrap:"break-word",wordBreak:"break-word",whiteSpace:"break-spaces"},placement:"left",content:a,children:(0,P.jsx)("div",{"data-testid":"create_tome_button_tooltip",children:d})}):d};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=(0,i.forwardRef)(((e,t)=>(0,P.jsxs)(A.Z,te(te({ref:t,viewBox:"0 0 64 64"},e),{},{children:[(0,P.jsx)("path",{d:"M21.5858 28.5858L30.5858 19.5858C31.3668 18.8047 32.6332 18.8047 33.4142 19.5858L42.4142 28.5858C43.1953 29.3668 43.1953 30.6332 42.4142 31.4142C41.6332 32.1953 40.3668 32.1953 39.5858 31.4142L34 25.8284V43C34 44.1046 33.1046 45 32 45C30.8954 45 30 44.1046 30 43V25.8284L24.4142 31.4142C23.6332 32.1953 22.3668 32.1953 21.5858 31.4142C20.8047 30.6332 20.8047 29.3668 21.5858 28.5858Z"}),(0,P.jsx)("path",{fillRule:"evenodd",d:"M56 32C56 45.2548 45.2548 56 32 56C18.7452 56 8 45.2548 8 32C8 18.7452 18.7452 8 32 8C45.2548 8 56 18.7452 56 32ZM52 32C52 43.0457 43.0457 52 32 52C20.9543 52 12 43.0457 12 32C12 20.9543 20.9543 12 32 12C43.0457 12 52 20.9543 52 32Z"})]})))),oe=n(65653),ie=n(14773);const re=(0,f.ZP)(G.Z).withConfig({displayName:"UpgradeButton__StyledTomeButton",componentId:"sc-1kyn5mm-0"})(["justify-content:flex-start;height:32px;font-weight:600;padding-left:14px;padding-right:16px;min-width:0;"," > span{font-size:",";}"],q.qc,(e=>{let{theme:t}=e;return t.fontSizes.smmd}));var se=()=>{const{t:e}=(0,b.$G)(),{openSettings:t}=(0,oe.r)(),{apolloClient:n}=(0,m.bp)(),o=(0,i.useCallback)((()=>{t(ie.u.PLANS),N.ZP.reportPaymentEvent({apolloClient:n,trackEventType:N.nM.CLICK_WORKSPACE_UPGRADE_BUTTON})}),[n,t]);return(0,P.jsx)(re,{color:"default",startIcon:(0,P.jsx)(ne,{style:{height:20,width:20}}),onClick:o,onZ0:!0,"aria-label":e("upgradeButton.ariaLabel"),"data-testid":"upgrade_button",children:e("upgradeButton.label")})},ae=n(60559);const le=f.ZP.div.withConfig({displayName:"MobileBannerstyles__MobileBannerCard",componentId:"faiso3-0"})(["padding:24px;background:",";box-shadow:",";border-radius:",";margin:16px auto 0;width:","px;"],(e=>e.theme.colors.mowebBannerBackground),(e=>e.theme.boxShadow.medium),(e=>e.theme.borderRadius.sm),ae.rh.longSide),de=f.ZP.div.withConfig({displayName:"MobileBannerstyles__MobileBannerHeaderText",componentId:"faiso3-1"})(["font-weight:700;font-size:24px;line-height:1.2;font-family:",";color:",";margin-bottom:8px;"],(e=>e.theme.fonts.ui),(e=>e.theme.colors.contrast)),ce=f.ZP.div.withConfig({displayName:"MobileBannerstyles__MobileBannerBodyText",componentId:"faiso3-2"})(["font-family:",";font-size:",";line-height:1.3333;color:",";"],(e=>e.theme.fonts.ui),(e=>e.theme.fontSizes.smmd),(e=>e.theme.colors.mowebBannerBody));var pe=n(85518),ue=n(50319),ge=n(30990),me=n(24656),he=n(56793),fe=n(60928),be=n(77759),xe=n(64972),ve=n(74591),ye=n(47314),we=n(21585),je=n(15814);const Ce=ae.rh.longSide+2*(ae.x3+ae.at+ae.OM),Pe=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomeFeedWrapper",componentId:"sc-2qikca-0"})(["height:100%;overflow:auto;"]),_e=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomeHeader",componentId:"sc-2qikca-1"})(["display:flex;justify-content:space-between;height:64px;padding-top:16px;padding-right:13px;padding-bottom:","px;align-items:baseline;background-color:",";",";"],(e=>{let{isMobile:t}=e;return t?10:16}),(e=>{let{theme:t}=e;return t.colors.workspaceBackground}),(e=>{let{isMobile:t}=e;return!t&&(0,f.iv)(["position:sticky;top:0;z-index:1;"])})),Oe=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomeHeaderTrailingButtonsContainer",componentId:"sc-2qikca-2"})(["display:flex;gap:8px;"]),Ie=f.ZP.div.withConfig({displayName:"TomeFeedstyles__FeedLabel",componentId:"sc-2qikca-3"})(["padding:0 8px;font-size:",";font-weight:400;line-height:17px;color:",";white-space:nowrap;",";"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.contrast40),(e=>e.$loading&&`width: 91px;\n     height: 12px;\n     border-radius: 4px;\n     background-color: ${e.theme.colors.contrast8}`)),Te=f.ZP.div.withConfig({displayName:"TomeFeedstyles__FeedContentSection",componentId:"sc-2qikca-4"})(["display:grid;grid-template-columns:repeat(auto-fill,","px);grid-gap:","px;margin-bottom:","px;"],Ce,24,24),ke=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomePreviewLoadingPlaceholder",componentId:"sc-2qikca-5"})(["height:","px;width:","px;border-radius:12px;padding:4px;opacity:","%;"],ae.rh.shortSide+44,ae.rh.longSide+2*ae.rh.padding,(e=>e.opacity)),Se=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomePreviewLoadingPlaceholderTop",componentId:"sc-2qikca-6"})(["height:","px;width:100%;background-color:",";border-radius:","px;"],ae.rh.shortSide,(e=>e.theme.colors.contrast4),ae.rh.radius),Ze=f.ZP.div.withConfig({displayName:"TomeFeedstyles__TomePreviewLoadingPlaceholderBottom",componentId:"sc-2qikca-7"})(["height:52px;width:100%;margin-bottom:10px;"]);var Ee;!function(e){e.MAX_FREE_TOMES_COUNT_REACHED="MAX_FREE_TOMES_COUNT_REACHED"}(Ee||(Ee={}));const Ne=f.ZP.div.withConfig({displayName:"TomePreview__TomePreviewWrapper",componentId:"sc-162nm9y-0"})([""]),Me=f.ZP.div.withConfig({displayName:"TomePreview__TomePreviewStyles",componentId:"sc-162nm9y-1"})(["width:","px;overflow:hidden;"],Ce),Le=f.ZP.span.withConfig({displayName:"TomePreview__PreviewAuthorLabel",componentId:"sc-162nm9y-2"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),De=f.ZP.div.withConfig({displayName:"TomePreview__PreviewMenu",componentId:"sc-162nm9y-3"})(["height:28px;width:28px;border-radius:4px;display:flex;align-items:center;visibility:",";&:hover{background-color:",";}"],(e=>e.visible?"visible":"hidden"),(e=>e.theme.colors.contrast8)),Re=f.ZP.div.withConfig({displayName:"TomePreview__PreviewMeta",componentId:"sc-162nm9y-4"})(["padding:10px 8px 0;display:flex;flex-direction:row;justify-content:space-between;align-items:center;"]),Be=f.ZP.div.withConfig({displayName:"TomePreview__PreviewMetaMain",componentId:"sc-162nm9y-5"})(["width:calc(100% - 28px);"]),ze=f.ZP.div.withConfig({displayName:"TomePreview__PreviewSubtitle",componentId:"sc-162nm9y-6"})(["font-size:",";line-height:17px;color:",";display:flex;flex-direction:row;"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.secondaryUiText)),Ae=f.ZP.span.withConfig({displayName:"TomePreview__PreviewSpacer",componentId:"sc-162nm9y-7"})(["margin-left:4px;margin-right:4px;"]),Fe=f.ZP.span.withConfig({displayName:"TomePreview__PreviewTimeLabel",componentId:"sc-162nm9y-8"})(["min-width:125px;"]),He=f.ZP.div.withConfig({displayName:"TomePreview__PreviewTitle",componentId:"sc-162nm9y-9"})(["color:",";font-size:",";font-weight:400;line-height:17px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.theme.colors.contrast),(e=>e.theme.fontSizes.sm)),Ue=ae.at,$e=f.ZP.div.withConfig({displayName:"TomePreview__EmptyPreviewSelectionOutline",componentId:"sc-162nm9y-10"})(["display:flex;border-radius:","px;border:",";margin-top:","px;"],ae.rh.radius+ae.x3,(e=>{let{$selected:t,theme:n}=e;return t?`${Ue}px solid ${n.colors.contentAccent}`:`${Ue}px solid transparent`}),Ue),Ge=f.ZP.div.withConfig({displayName:"TomePreview__TomeEmptyPreviewTile",componentId:"sc-162nm9y-11"})(["background-color:",";width:","px;height:","px;border-radius:","px;margin:","px;"],(e=>e.theme.colors.page),ae.rh.longSide,ae.rh.shortSide,ae.rh.radius,Ue),We=f.ZP.div.withConfig({displayName:"TomePreview__TomePreviewTiles",componentId:"sc-162nm9y-12"})(["","{border-radius:","px;border-width:","px;border-style:solid;border-color:transparent;box-shadow:"," margin-top:","px;}","{border-radius:","px;padding:","px;background:",";}","{background:",";max-height:","px;overflow:hidden;}"],ve.pu,ae.rh.radius+ae.OM,ae.OM,(e=>{let{$selected:t,theme:n}=e;if(t)return`0px 0px 0px ${Ue}px ${n.colors.contentAccent};`;const o=n.colors.page.slice("var(".length).slice(0,-1);return"#000000"===getComputedStyle(document.body).getPropertyValue(o)?`0px 0px 0px ${Ue}px ${n.colors.outlineBorder};`:"none;"}),Ue,ve.mA,ae.rh.radius,ae.x3,(e=>{let{theme:t}=e;return t.colors.page}),ve.R6,(e=>{let{theme:t}=e;return t.colors.page}),ae.rh.shortSide);var qe=(0,i.memo)((e=>{var t;let{tome:n,onTomeDelete:o,selected:r,setSelectedTomeId:a,userCanDuplicateTome:d}=e;const c=(0,s.useRouter)(),{apolloClient:p,clientId:g}=(0,m.bp)(),{activeMembership:h}=(0,i.useContext)(k.Z),f=(0,je.m)(),x=new URL(n.canonicalUrl).pathname,{t:v}=(0,b.$G)(),y=(0,i.useCallback)((()=>{c.push(x,void 0,{shallow:!0}),(0,R.Ag)(n,p)}),[x]),w=(0,i.useCallback)((e=>{(pe.tq||pe.Em||0===(null===e||void 0===e?void 0:e.button))&&y()}),[y]),j=(0,i.useCallback)((()=>{window.open(x,"_blank"),(0,R.Ag)(n,p)}),[x]),C=(0,i.useCallback)((()=>{const e=`${new URL(window.location.href).origin}${x}`,t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),(0,M.Sd)({message:v("components.tomePreview.linkCopiedToastMessage")})}),[x,v]),[_]=(0,ue.D)(be.Z,{update(e,t){let{data:{deleteTome:n}}=t;n&&o(e,n)},optimisticResponse:{__typename:"Mutation",deleteTome:{__typename:"Tome",id:n.id,deleted:!0}}}),[O]=(0,ue.D)(xe.Z,{update(e,t){let{data:{restoreTome:n}}=t;n&&((0,V.W)(e,n),(0,R.Ag)(n,p),a(n.id),(0,l.MT)(c,"recent"))}}),I=(0,he.Z)(),T=(0,i.useCallback)((()=>{null!==h&&void 0!==h&&h.org&&I({tomeId:n.id,orgId:h.org.id,onDuplicateComplete:(e,t)=>{a(e),window.Cypress||window.open(t,"_blank")},onDuplicateError:e=>{let t=v("toastMessages.tomeCreationError.permissionDenied");if(e instanceof ge.cA){e.graphQLErrors.map((e=>{var t;return null===(t=e.extensions)||void 0===t?void 0:t.code})).filter((e=>!!e)).find((e=>e===Ee.MAX_FREE_TOMES_COUNT_REACHED))&&(t=v("toastMessages.tomeCreationError.disabledBecauseOutOfFreeTomes"))}(0,M.Sd)({message:t})}})}),[null===h||void 0===h?void 0:h.org,I,a,n.id,v]),{0:S,1:Z}=(0,i.useState)(pe.tq||pe.Em),{0:E,1:N}=(0,i.useState)(!1),L=(0,i.useCallback)((e=>{(0,R.W8)(n.id,{title:e},p,g)}),[p,g,n.id]),D=(0,i.useCallback)((()=>{_({variables:{tomeId:n.id}}).then((e=>{let{data:t}=e;null!==t&&void 0!==t&&t.deleteTome?(0,M.Sd)({message:v("components.tomePreview.tomeDeletedToastMessage")}):(0,M.Sd)({message:v("components.tomePreview.canNotDeleteTomePermissionDeniedErrorToastMessage")})}))}),[]),B=(0,i.useCallback)((()=>{O({variables:{tomeId:n.id}}).then((e=>{let{data:t}=e;if(null!==t&&void 0!==t&&t.restoreTome){const e=n.canonicalUrl;(0,M.Sd)({message:v("components.tomePreview.tomeRestoredToastMessage"),action:"open",path:e})}else(0,M.Sd)({message:v("components.tomePreview.sorryPermissionDeniedErrorToastMessage")})}))}),[]),z=[{type:"option",text:v("components.tomePreview.openDropdownMenuItem"),action:y},{type:"option",text:v("components.tomePreview.openInNewTabDropdownMenuItem"),action:j},{type:"separator"},{type:"option",text:v("components.tomePreview.copyLinkDropdownMenuItem"),action:C}];d&&z.push({type:"option",text:v("components.tomePreview.duplicateDropdownMenuItem"),action:T}),n.currentUserPermission.canEdit&&z.push({type:"separator"},{type:"option",text:v("components.tomePreview.renameDropdownMenuItem"),action:f.open}),n.currentUserPermission.canManage&&(n.deleted?z.push({type:"option",text:v("components.tomePreview.restoreDropdownMenuItem"),action:B}):z.push({type:"option",text:v("components.tomePreview.deleteDropdownMenuItem"),action:D,variant:"destructive"}));const A=null===(t=n.pages)||void 0===t?void 0:t[0];return(0,P.jsxs)(Ne,{"data-testid":"tome_preview",children:[(0,P.jsx)(we.Z,{menuWidth:180,menuPosition:"below",menuAlign:"click",rightClickActivated:!0,itemsOrFn:z,onOpenDropdown:()=>a(n.id),children:(0,P.jsxs)(Me,{onClick:()=>{pe.tq||pe.Em?w():a(n.id)},onDoubleClick:w,onMouseEnter:pe.tq||pe.Em?void 0:()=>Z(!0),onMouseLeave:pe.tq||pe.Em?void 0:()=>Z(!1),children:[A?(0,P.jsx)(u.Z,{theme:A.theme,children:(0,P.jsx)(We,{$selected:r,$themeId:A.theme.id,children:(0,P.jsx)(ve.ZP,{preview:!0,page:A,tomeId:n.id,sizes:(0,ae.KT)(),pageKind:me.s.WORKSPACE,active:!1,isVisible:!1,canEdit:!1,useEditablePage:!1,isFirstPage:!0,pageVerticalMargin:0})})}):(0,P.jsx)($e,{$selected:r,children:(0,P.jsx)(Ge,{})}),(0,P.jsxs)(Re,{children:[(0,P.jsxs)(Be,{children:[(0,P.jsx)(He,{children:n.title}),(0,P.jsxs)(ze,{children:[(0,P.jsx)(Le,{children:n.author.name}),(0,P.jsx)(Ae,{children:"\xb7"}),(0,P.jsx)(Fe,{children:`${v("components.tomePreview.edited",{relativeTimeLabel:(0,fe.Z)(n.updatedAt,!1,!1)})}`})]})]}),(0,P.jsx)(we.Z,{menuWidth:180,menuPosition:"below",menuAlign:"right",setOpenState:N,itemsOrFn:z,interceptDoubleClick:!0,children:(0,P.jsx)(De,{visible:S||E,onClick:e=>{e.stopPropagation(),a(n.id)},children:(0,P.jsx)(ye.Z,{style:{fillOpacity:.35,width:28,height:28}})})})]})]})}),(0,P.jsx)(je.Z,{ref:f.ref,title:v("components.tomePreview.renameToPromptModalTitle"),primaryButtonText:v("components.tomePreview.renamePromptModalButtonLabel"),onSubmit:L,placeholder:v("components.tomePreview.renamePromptModalTitlePlaceholder")})]})})),Ve=n(85684);var Ke=e=>{var t;let{loading:n,data:o,getTomeConnection:r,onLoadMore:s,onTomeDelete:a,feedLabel:l,isMobile:d,upgradeEligible:c}=e;const p=(0,i.useRef)(null),u=(0,i.useRef)(null),g=(0,i.useRef)(!1),{t:m}=(0,b.$G)(),{remainingTomeCreationsForOrg:h}=(0,D.Z)(),f=0!==h,x=(0,i.useCallback)((()=>{p.current&&p.current.scrollTop+p.current.clientHeight>=p.current.scrollHeight&&(g.current||(g.current=!0,s((()=>{g.current=!1}))))}),[s]),{0:v,1:y}=(0,i.useState)(null),w=n||!o?[]:(null===(t=r(o))||void 0===t?void 0:t.nodes)||[];return(0,P.jsxs)(Pe,{ref:p,onScroll:x,children:[d&&(0,P.jsxs)(le,{children:[(0,P.jsx)(de,{children:m("tomeFeed.mobileBanner.header")}),(0,P.jsx)(ce,{children:m("tomeFeed.mobileBanner.body")})]}),(0,P.jsxs)(_e,{isMobile:d,children:[(0,P.jsx)(Ie,{$loading:n,children:n?null:l}),!d&&(0,P.jsxs)(Oe,{children:[c&&(0,P.jsx)(se,{}),(0,P.jsx)(Y,{})]})]}),(0,P.jsx)(Ve.Z,{onClick:()=>{y(null)},children:(0,P.jsx)(Te,{"data-testid":"tome_feed_content",ref:u,onClick:e=>{u.current===e.target&&y(null)},children:n?[...Array(8)].map(((e,t)=>{return(0,P.jsxs)(ke,{opacity:(n=t,n<3?100:100*Math.max(-.13*n+1.1,.3)),children:[(0,P.jsx)(Se,{}),(0,P.jsx)(Ze,{})]},t);var n})):w.map((e=>e?(0,P.jsx)(qe,{tome:e,onTomeDelete:a,selected:v===e.id,setSelectedTomeId:y,userCanDuplicateTome:f},e.id):null))})})]})},Qe=n(92334),Je=n(73515);const Xe=(e,t,n)=>{const{longSide:o,shortSide:i,padding:r}=ae.rh,s=o+2*r,a=i+2*r+44,l=e-Qe.Qz-2*Je.Bb,d=Math.floor(l/(s+24)),c=Math.ceil(t/(a+24));return Math.max(c*d+1,n)};function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:r,query:s,subscription:a,subscriptionVariables:l,updateQuery:d,getTomeConnection:c,feedLabel:p,variables:u,isMobile:g,upgradeEligible:h}=e;const f=(0,i.useRef)(null),{apolloClient:b}=(0,m.bp)();let x=et({limit:Xe(window.innerWidth,window.innerHeight,n)},u);if(!f.current){const e=b.cache.readQuery({query:s});if(e){const t=c(e);t&&t.pageInfo&&(x=et(et({},x),{},{cursor:t.pageInfo.endCursor||""}))}f.current=x}const v=(0,i.useRef)(null),{loading:y,data:w,fetchMore:j,subscribeToMore:C}=(0,z.a)(s,{variables:f.current,nextFetchPolicy:"cache-only",errorPolicy:"all",onCompleted:()=>{o.v.addTiming(`workspace_query_load_${p.replace(" ","_")}`)}});(0,i.useEffect)((()=>{a&&l&&Object.values(l).every((e=>void 0!==e))&&null===v.current&&(v.current=C({document:a,variables:l,updateQuery:d}))}),[a,l,d,C]);const _=r||y;return(0,P.jsx)(Ke,{loading:_,data:w,getTomeConnection:c,onLoadMore:e=>{const n=w&&c(w);null!==n&&void 0!==n&&n.pageInfo.hasNextPage&&j({variables:{limit:t,cursor:n.pageInfo.endCursor}}).then((()=>{e&&e()}))},onTomeDelete:R.h6,feedLabel:p,isMobile:g,upgradeEligible:h})};var nt=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,userId:i,isMobile:r,upgradeEligible:s}=e;const{t:a}=(0,b.$G)();return(0,P.jsx)(tt,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.N8k,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.sharedWithMeTomes},subscription:d.Ygx,subscriptionVariables:{userId:i},updateQuery:(e,t)=>{let{subscriptionData:n}=t;return n.data?(0,R.gS)(e,n.data.tomeShareIndividual):e},feedLabel:a("feed.label.recentlyEdited"),isMobile:r,upgradeEligible:s})};var ot=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,orgId:i,isMobile:r,upgradeEligible:s}=e;const{t:a}=(0,b.$G)();return(0,P.jsx)(tt,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.I6k,getTomeConnection:e=>{var t,n;return null===(t=e.me)||void 0===t||null===(n=t.org)||void 0===n?void 0:n.tomes},subscription:d.PTV,subscriptionVariables:{orgId:i},updateQuery:(e,t)=>{let{subscriptionData:n}=t;return n.data?(0,R.pq)(e,n.data.tomeShareOrg):e},feedLabel:a("workspace.feed.orgTomesFeed.recentlyEditedTomesFeedLabel"),isMobile:r,upgradeEligible:s})};var it=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,isMobile:i,upgradeEligible:r}=e;const{t:s}=(0,b.$G)();return(0,P.jsx)(tt,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.mxK,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.deletedTomes},feedLabel:s("workspace.feed.deletedTomesFeed.recentlyDeletedPaginatedTomesFeedLabel"),isMobile:i,upgradeEligible:r})};var rt=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,isMobile:i,upgradeEligible:r}=e;const{t:s}=(0,b.$G)();return(0,P.jsx)(tt,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.rjw,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.tomes},feedLabel:s("feed.label.recentlyEdited"),isMobile:i,upgradeEligible:r})};var st=e=>{let{numTomesPerPage:t,numTomesInitial:n,loading:o,isMobile:i,upgradeEligible:r}=e;const{t:s}=(0,b.$G)();return(0,P.jsx)(tt,{numTomesPerPage:t,numTomesInitial:n,loading:o,query:d.yCJ,getTomeConnection:e=>{var t;return null===(t=e.me)||void 0===t?void 0:t.recentTomes},feedLabel:s("feed.label.recentlyViewed"),isMobile:i,upgradeEligible:r})},at=n(37982);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,dt(dt({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.01 16.0209H49.01C50.1146 16.0209 51.01 16.9163 51.01 18.0209C51.01 19.1254 50.1146 20.0209 49.01 20.0209H15.01C13.9054 20.0209 13.01 19.1254 13.01 18.0209C13.01 16.9163 13.9054 16.0209 15.01 16.0209ZM15.01 30.0209H49.01C50.1146 30.0209 51.01 30.9163 51.01 32.0209C51.01 33.1254 50.1146 34.0209 49.01 34.0209H15.01C13.9054 34.0209 13.01 33.1254 13.01 32.0209C13.01 30.9163 13.9054 30.0209 15.01 30.0209ZM15.01 44.0209H49.01C50.1146 44.0209 51.01 44.9163 51.01 46.0209C51.01 47.1254 50.1146 48.0209 49.01 48.0209H15.01C13.9054 48.0209 13.01 47.1254 13.01 46.0209C13.01 44.9163 13.9054 44.0209 15.01 44.0209Z"})})))),pt=n(39293),ut=n(16963);function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,mt(mt({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{d:"M32 56C18.7452 56 8 45.2548 8 32C8 18.7452 18.7452 8 32 8C45.2548 8 56 18.7452 56 32V32C56 45.2548 45.2548 56 32 56ZM52 32V32.0008C52.0038 20.9551 43.0526 11.9977 32.0069 11.9939C20.9612 11.9901 12.0038 20.9413 12 31.987C11.9983 36.957 13.847 41.7495 17.186 45.4307C17.4631 45.7324 17.9322 45.7524 18.2339 45.4753C18.2577 45.4534 18.2801 45.43 18.3009 45.4051C20.7947 42.3539 25.3146 39.9958 32.0009 39.9958C38.6872 39.9958 43.2058 42.3539 45.7 45.4045C45.963 45.7186 46.4307 45.76 46.7447 45.4971C46.7696 45.4763 46.793 45.4539 46.8149 45.43C50.157 41.7562 52.0062 36.9665 52 32L52 32ZM32.0012 37.0137C27.1953 37.0137 22.9972 33.0447 22.9972 26.6548C22.9972 21.1537 26.6326 17.0101 32.0012 17.0101C37.3698 17.0101 41.0051 21.1537 41.0051 26.6548C41.0051 33.0447 36.8073 37.0137 32.0012 37.0137Z"})}))));function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xt=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,bt(bt({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 8C22.7909 8 21 9.79086 21 12V15.5C21 15.7761 20.7761 16 20.5 16H14.0001C12.8956 16 12.0001 16.8954 12.0001 18C12.0001 19.1046 12.8956 20 14.0001 20H16L17.7901 52.2219C17.9079 54.3415 19.661 56 21.7839 56H42.2161C44.339 56 46.0921 54.3415 46.2099 52.2219L48 20H50.0001C51.1047 20 52.0001 19.1046 52.0001 18C52.0001 16.8954 51.1047 16 50.0001 16H43.5C43.2239 16 43 15.7761 43 15.5V12C43 9.79086 41.2091 8 39 8H25ZM38.75 16H25.25C25.1119 16 25 15.8881 25 15.75V13C25 12.4477 25.4477 12 26 12H38C38.5523 12 39 12.4477 39 13V15.75C39 15.8881 38.8881 16 38.75 16ZM38 26C38 24.8954 37.1046 24 36 24C34.8954 24 34 24.8954 34 26V46C34 47.1046 34.8954 48 36 48C37.1046 48 38 47.1046 38 46V26ZM28 24C29.1046 24 30 24.8954 30 26V46C30 47.1046 29.1046 48 28 48C26.8954 48 26 47.1046 26 46V26C26 24.8954 26.8954 24 28 24Z"})}))));function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wt=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,yt(yt({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32 56C45.2548 56 56 45.2548 56 32C56 18.7452 45.2548 8 32 8C18.7452 8 8 18.7452 8 32C8 45.2548 18.7452 56 32 56ZM34 20C34 18.8954 33.1046 18 32 18C30.8954 18 30 18.8954 30 20V32C30 32.5304 30.2107 33.0391 30.5858 33.4142L39.0858 41.9142C39.8668 42.6953 41.1332 42.6953 41.9142 41.9142C42.6953 41.1332 42.6953 39.8668 41.9142 39.0858L34 31.1716V20Z"})})))),jt=n(30362);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Pt(Pt({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{d:"M13.6084 42.1C14.546 41.8557 15.3811 41.3183 15.9919 40.5662C16.6027 39.814 16.9573 38.8865 17.004 37.9187L18.5975 24.5178C18.9215 21.8711 20.0281 19.3813 21.7755 17.3672C23.523 15.3531 25.8318 13.9064 28.4063 13.2123C28.5056 12.3287 28.927 11.5127 29.5899 10.9201C30.2528 10.3276 31.1108 10 31.9999 10C32.889 10 33.747 10.3276 34.4099 10.9201C35.0728 11.5127 35.4942 12.3287 35.5935 13.2123C38.168 13.9065 40.4767 15.3532 42.224 17.3673C43.9714 19.3814 45.0779 21.8711 45.4018 24.5178L46.9954 37.9187C47.0422 38.8865 47.3969 39.8141 48.0078 40.5663C48.6187 41.3184 49.4539 41.8558 50.3916 42.1C50.9024 42.2366 51.3456 42.5551 51.6381 42.9956C51.9305 43.4361 52.0519 43.9682 51.9796 44.4919C51.9072 45.0157 51.646 45.4949 51.2451 45.8396C50.8442 46.1843 50.3312 46.3707 49.8025 46.3636H14.1973C13.6687 46.3706 13.1557 46.1842 12.7548 45.8395C12.3539 45.4948 12.0927 45.0156 12.0204 44.4918C11.9481 43.9681 12.0695 43.436 12.362 42.9955C12.6544 42.5551 13.0977 42.2366 13.6084 42.1ZM31.9998 53.6363C30.6325 53.6393 29.3135 53.1301 28.3029 52.2091C27.2922 51.2881 26.663 50.022 26.5392 48.6603C26.5359 48.5981 26.5453 48.536 26.5669 48.4777C26.5886 48.4193 26.622 48.3661 26.6651 48.3212C26.7082 48.2764 26.76 48.2408 26.8175 48.2168C26.8749 48.1929 26.9366 48.1809 26.9988 48.1818H37.0008C37.0631 48.1809 37.1248 48.1928 37.1822 48.2168C37.2396 48.2408 37.2915 48.2763 37.3346 48.3212C37.3777 48.3661 37.4111 48.4193 37.4328 48.4776C37.4544 48.536 37.4639 48.5981 37.4605 48.6603C37.3367 50.022 36.7075 51.2881 35.6968 52.2091C34.6861 53.1301 33.3672 53.6393 31.9998 53.6363Z"})}))));function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt=(0,i.forwardRef)(((e,t)=>(0,P.jsxs)(A.Z,It(It({ref:t,viewBox:"0 0 20 20"},e),{},{children:[(0,P.jsx)("path",{d:"M8.75 6.875C8.75 8.77348 7.35089 10.3125 5.625 10.3125C3.89911 10.3125 2.5 8.77348 2.5 6.875C2.5 4.97652 3.89911 3.4375 5.625 3.4375C7.35089 3.4375 8.75 4.97652 8.75 6.875Z"}),(0,P.jsx)("path",{d:"M4.54545 11.5625C2.03507 11.5625 0 13.2851 0 15.7955C0 16.0465 0.203507 16.25 0.454545 16.25H10.7955C11.0465 16.25 11.25 16.0465 11.25 15.7955C11.25 13.2851 9.21493 11.5625 6.70455 11.5625H4.54545Z"}),(0,P.jsx)("path",{d:"M19.5455 16.25H12.6926C12.5784 16.25 12.5 16.1261 12.5 16.0118C12.5 14.6703 12.251 13.6663 11.5267 12.7736C11.3248 12.5247 11.3541 12.142 11.6348 11.9873C12.1296 11.7147 12.6088 11.5625 13.2955 11.5625H15.4545C17.9649 11.5625 20 13.2851 20 15.7955C20 16.0465 19.7965 16.25 19.5455 16.25Z"}),(0,P.jsx)("path",{d:"M14.375 10.3125C16.1009 10.3125 17.5 8.77348 17.5 6.875C17.5 4.97652 16.1009 3.4375 14.375 3.4375C12.6491 3.4375 11.25 4.97652 11.25 6.875C11.25 8.77348 12.6491 10.3125 14.375 10.3125Z"})]}))));function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,St(St({ref:t,viewBox:"0 0 24 24"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.9992 12.7578H18.7492V15.0078C18.7492 15.422 18.4134 15.7578 17.9992 15.7578C17.585 15.7578 17.2492 15.422 17.2492 15.0078V12.7578H14.9992C14.585 12.7578 14.2492 12.422 14.2492 12.0078C14.2492 11.5936 14.585 11.2578 14.9992 11.2578H17.2492V9.00777C17.2492 8.59356 17.585 8.25777 17.9992 8.25777C18.4134 8.25777 18.7492 8.59356 18.7492 9.00777V11.2578H20.9992C21.4134 11.2578 21.7492 11.5936 21.7492 12.0078C21.7492 12.422 21.4134 12.7578 20.9992 12.7578ZM14.9217 19.5078H2.69421C2.44179 19.5039 2.24032 19.2961 2.2442 19.0437C2.24441 19.0295 2.24529 19.0153 2.24683 19.0012C2.44701 16.9172 4.57044 14.6287 8.80806 14.6287C13.0457 14.6287 15.1688 16.9172 15.3691 19.0012C15.3964 19.2522 15.2152 19.4778 14.9642 19.5051C14.9501 19.5067 14.9359 19.5076 14.9217 19.5078ZM8.80813 13.5057C6.70438 13.5057 4.86688 11.7203 4.86688 8.84604C4.86688 6.37168 6.45804 4.50781 8.80813 4.50781C11.1582 4.50781 12.7494 6.37156 12.7494 8.84604C12.7493 11.7203 10.9117 13.5057 8.80813 13.5057Z"})})))),Et=n(10196),Nt=n(39346);const Mt=new Map([["workspace-created",ht],["workspace-deleted",xt],["workspace-recent",wt],["workspace-org",jt.Z],["workspace-shared",Tt],["workspace-bell",_t],["workspace-dot-bell",_t],["workspace-invite",Zt],["workspace-sparkle",Et.Z]]),Lt=f.ZP.div.withConfig({displayName:"WorkspaceTabIcon__StyledIcon",componentId:"xxu4sb-0"})(["width:24px;height:24px;opacity:",";"],(e=>{let{selected:t}=e;return t?1:.5})),Dt=(0,f.ZP)(Nt.Z).withConfig({displayName:"WorkspaceTabIcon__StyledBadge",componentId:"xxu4sb-1"})(["height:24px;"]),Rt=f.ZP.div.withConfig({displayName:"WorkspaceTabIcon__LoadingPlaceholder",componentId:"xxu4sb-2"})(["width:24px;height:24px;border-radius:100%;background-color:",";"],(e=>e.theme.colors.contrast12));var Bt=e=>{let{badge:t,type:n,id:o,selected:i,loading:r,className:s}=e;const a=Mt.get(n),{t:l}=(0,b.$G)(),d=()=>(0,P.jsx)(Lt,{as:a,selected:i,alt:l("workspace.tabIconAltText",{id:o}),className:s});return r?(0,P.jsx)(Rt,{}):t?(0,P.jsx)(Dt,{children:d()}):d()};const zt=f.ZP.div.withConfig({displayName:"MobileWorkspaceHeader__Header",componentId:"sc-171ohze-0"})(["background-color:",";margin:0 4px 0 8px;padding:12px 0px;display:flex;justify-content:space-between;align-items:center;"],(e=>{let{theme:t}=e;return t.colors.background})),At=f.ZP.div.withConfig({displayName:"MobileWorkspaceHeader__HeaderText",componentId:"sc-171ohze-1"})(["font-weight:400;font-family:",";font-size:",";color:",";line-height:1.3333;"," width:","px;"],(e=>{let{theme:t}=e;return t.fonts.ui}),(e=>{let{theme:t}=e;return t.fontSizes.smmd}),(e=>{let{theme:t}=e;return t.colors.contrast}),q.wR,ae.rh.longSide-60),Ft=f.ZP.div.withConfig({displayName:"MobileWorkspaceHeader__LogoWrapper",componentId:"sc-171ohze-2"})(["height:24px;color:",";padding-left:32px;"],(e=>{let{theme:t}=e;return t.colors.uiAccent})),Ht=(0,f.ZP)(pt.AW).withConfig({displayName:"MobileWorkspaceHeader__MobileDropdownMenuContent",componentId:"sc-171ohze-3"})(["max-width:calc(100vw - 44px);"]),Ut=(0,f.ZP)(pt.Xi).withConfig({displayName:"MobileWorkspaceHeader__MobileDropdownMenuItem",componentId:"sc-171ohze-4"})(["height:44px;padding:0 15px;display:grid;grid-template-columns:32px 1fr 32px;font-size:",";line-height:1.3;svg{margin-left:auto;opacity:1;}"],(e=>{let{theme:t}=e;return t.fontSizes.md})),$t=f.ZP.div.withConfig({displayName:"MobileWorkspaceHeader__CheckWrapper",componentId:"sc-171ohze-5"})(["display:flex;"]),Gt=f.ZP.span.withConfig({displayName:"MobileWorkspaceHeader__Overflow",componentId:"sc-171ohze-6"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),Wt=(0,f.ZP)(pt.VD).withConfig({displayName:"MobileWorkspaceHeader__MenuSeparator",componentId:"sc-171ohze-7"})(["margin:0;"]),qt=e=>{let{onSelect:t,children:n,selected:o}=e;return(0,P.jsxs)(Ut,{onSelect:t,children:[(0,P.jsx)($t,{children:o&&(0,P.jsx)(ut.Z,{style:{height:24,width:24}})}),n]})};var Vt=e=>{let{tabs:t,selectedTab:n,orgName:o}=e;const{t:i}=(0,b.$G)(),r=(0,s.useRouter)(),a=(0,P.jsx)("div",{children:"\xa0"});return(0,P.jsxs)(zt,{children:[(0,P.jsxs)(pt.h_,{modal:!1,children:[(0,P.jsx)(pt.$F,{asChild:!0,children:(0,P.jsx)(ct,{style:{height:24,width:24,opacity:.4}})}),(0,P.jsxs)(Ht,{sideOffset:8,"data-disable-mousedown-unselect":!0,align:"start",style:{padding:0},children:[t.map(((e,t)=>{let{id:o,text:i,icon:s}=e;return(0,P.jsxs)(P.Fragment,{children:[0!==t&&(0,P.jsx)(Wt,{}),(0,P.jsxs)(qt,{selected:o===n,onSelect:()=>(0,l.MT)(r,o),children:[(0,P.jsx)(Gt,{children:i}),(0,P.jsx)(Bt,{id:o,type:s,selected:!0})]})]})})),(0,P.jsx)(Wt,{height:8}),(0,P.jsx)(qt,{onSelect:()=>{window.location.href=(0,j.Ky)()},children:i("profileMenuSectionLabel.logOut")})]})]}),(0,P.jsx)(At,{suppressHydrationWarning:!0,children:o||a}),(0,P.jsx)(Ft,{children:(0,P.jsx)(at.Z,{style:{height:24,width:24}})})]})},Kt=n(34425),Qt=n(62820),Jt=n(94717),Xt=n(50456);var Yt=Xt.ZP`
  mutation logNotificationClick($notificationId: String!) {
    logNotificationClick(input: { notificationId: $notificationId })
  }
`,en=n(48811),tn=n(33914),nn=n(71893);function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const sn=f.ZP.div.withConfig({displayName:"Notification__NotificationStyles",componentId:"z9l4vg-0"})(["padding:8px 16px 8px 8px;display:flex;flex-direction:row;cursor:pointer;&:hover{background-color:",";}"],(e=>e.theme.colors.contrast8)),an=f.ZP.div.withConfig({displayName:"Notification__UnreadIndicatorWrapper",componentId:"z9l4vg-1"})(["min-width:6px;padding-top:7px;"]),ln=f.ZP.div.withConfig({displayName:"Notification__UnreadIndicator",componentId:"z9l4vg-2"})(["width:6px;height:6px;background-color:",";border-radius:3px;"],(e=>e.theme.colors.uiAccent)),dn=f.ZP.div.withConfig({displayName:"Notification__UserProfileWrapper",componentId:"z9l4vg-3"})(["margin-left:8px;width:24px;"]),cn=f.ZP.div.withConfig({displayName:"Notification__ContentWrapper",componentId:"z9l4vg-4"})(["margin-left:8px;display:flex;flex-direction:column;overflow:hidden;"]),pn=f.ZP.div.withConfig({displayName:"Notification__Title",componentId:"z9l4vg-5"})(["color:",";font-size:",";line-height:17px;"],(e=>e.theme.colors.contrast),(e=>e.theme.fontSizes.sm)),un=f.ZP.div.withConfig({displayName:"Notification__TimeLabel",componentId:"z9l4vg-6"})([""," margin-top:4px;font-size:",";line-height:13px;"],q.OX,(e=>e.theme.fontSizes.xxs)),gn=f.ZP.div.withConfig({displayName:"Notification__CommentContent",componentId:"z9l4vg-7"})(["color:",";margin-top:4px;font-size:",";line-height:17px;user-select:auto;.selection{background-color:",";}p{margin:0;}a{","}"],(e=>e.theme.colors.notificationContent),(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.textSelection),nn.Z),mn=e=>{let{notification:t}=e;const n=(0,s.useRouter)(),{id:o,status:i}=t,{t:r}=(0,b.$G)(),[a]=(0,ue.D)(Yt,{optimisticResponse:{__typename:"Mutation",logNotificationClick:!0},update(e){e.modify({id:e.identify(t),fields:{status:()=>"CLICKED"}})}});let l,d;switch(t.__typename){case"CommentNotification":{const{createdAt:e,comment:o,title:i,webUrl:r}=t;if(!o)break;const{author:s,content:a}=o;let c;try{c=a?JSON.parse(a):null}catch{c=null}l=()=>{n.push(r)},d=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(dn,{children:(0,P.jsx)(en.Z,{user:s,size:24})}),(0,P.jsxs)(cn,{children:[(0,P.jsx)(pn,{children:i}),c&&(0,P.jsx)(gn,{children:(0,P.jsx)(tn.Z,rn({},c))}),(0,P.jsx)(un,{children:(0,fe.Z)(e,!1,!0)})]})]});break}case"TomeNotification":case"TileMentionNotification":{const{createdAt:e,author:o,title:i,webUrl:r}=t;if(!o||!r)break;l=()=>{n.push(r)},d=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(dn,{children:(0,P.jsx)(en.Z,{user:o,size:24})}),(0,P.jsxs)(cn,{children:[(0,P.jsx)(pn,{children:i}),(0,P.jsx)(un,{children:(0,fe.Z)(e,!1,!0)})]})]});break}case"ReferralNotification":{const{createdAt:e,inviter:n,invitee:o,title:i,type:r}=t;if(!n||!o)break;l=()=>{},d=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(dn,{children:(0,P.jsx)(en.Z,{user:"REFERRAL_CODE_USED"===r?o:n,size:24})}),(0,P.jsxs)(cn,{children:[(0,P.jsx)(pn,{children:i}),(0,P.jsx)(un,{children:(0,fe.Z)(e,!1,!0)})]})]});break}}return(0,P.jsxs)(sn,{onClick:()=>{a({variables:{notificationId:o}}),l&&l()},children:[(0,P.jsx)(an,{children:"CLICKED"!==i&&(0,P.jsx)(ln,{})}),d||(0,P.jsx)(cn,{children:r("library.notification.unsupportedNotification")})]})};var hn,fn=n(53098);function bn(){return bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},bn.apply(this,arguments)}var xn=function(e){return i.createElement("svg",bn({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),hn||(hn=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.817 14.824a.625.625 0 01-.885 0l-3.937-3.938L6.06 14.82a.625.625 0 01-.885-.884l3.934-3.934-3.933-3.934a.625.625 0 01.885-.884l3.933 3.933 3.937-3.937a.625.625 0 11.884.885l-3.937 3.937 3.938 3.937a.625.625 0 010 .884z",fill:"#fff"})))};var vn=Xt.ZP`
  mutation logNotificationImpression($latestTimestamp: String!) {
    logNotificationImpression(input: { latestTimestamp: $latestTimestamp })
  }
`;const yn=(0,f.ZP)(h.animated.div).withConfig({displayName:"NotificationFeed__NotificationFeedStyles",componentId:"sc-1ar2fcq-0"})(["position:absolute;top:","px;left:222px;width:288px;z-index:",";display:flex;flex-direction:column;background-color:",";border-radius:12px;overflow:hidden;box-shadow:",";max-height:calc( 100vh - ","px );",""],62,fn.Ue,(e=>e.theme.colors.menuBackgroundLayer[0]),(e=>{let{theme:t}=e;return t.boxShadow.large}),46,(e=>!e.$reachMaxHeight&&"\n    // if hasn't reached max height, maintain a 8px bottom spacing.\n    padding-bottom: 8px;\n  ")),wn=f.ZP.div.withConfig({displayName:"NotificationFeed__NotificationHeader",componentId:"sc-1ar2fcq-1"})(["height:48px;min-height:48px;font-size:",";line-height:19px;font-weight:700;display:flex;align-items:center;padding:0 16px;"],(e=>e.theme.fontSizes.smmd)),jn=f.ZP.div.withConfig({displayName:"NotificationFeed__NotificationHeaderLabel",componentId:"sc-1ar2fcq-2"})(["flex:1;"]),Cn=f.ZP.div.withConfig({displayName:"NotificationFeed__NotificationContent",componentId:"sc-1ar2fcq-3"})(["overflow:auto;display:flex;flex-direction:column;"]),Pn=f.ZP.div.withConfig({displayName:"NotificationFeed__EmptyStateContent",componentId:"sc-1ar2fcq-4"})(["height:140px;display:flex;align-items:center;font-size:",";line-height:17px;color:",";margin:0 auto;"],(e=>e.theme.fontSizes.sm),(e=>e.theme.colors.contrast40)),_n=(0,f.ZP)(Jt.Y).withConfig({displayName:"NotificationFeed__CloseButton",componentId:"sc-1ar2fcq-5"})(["height:20px;width:20px;border-radius:4px;"]);var On=e=>{let{perPage:t,isNotificationOpen:n,setIsNotificationOpen:o,style:r}=e;const s=(0,i.useRef)(),{apolloClient:a}=(0,m.bp)(),l=(0,i.useRef)(),c=(0,i.useRef)(null),p=!!c.current&&c.current.scrollHeight>c.current.clientHeight,u={limit:t};if(!s.current){const e=a.cache.readQuery({query:d.ADL});if(e&&e.me){var g;const t=null===(g=e.me)||void 0===g?void 0:g.notifications;t&&t.pageInfo&&(u.cursor=t.pageInfo.endCursor)}s.current=u}const{loading:h,data:f,fetchMore:x}=(0,d.lFd)({variables:s.current,nextFetchPolicy:"cache-only"}),v=(0,i.useCallback)((()=>{var e,n;null!==f&&void 0!==f&&null!==(e=f.me)&&void 0!==e&&null!==(n=e.notifications)&&void 0!==n&&n.pageInfo.hasNextPage&&x({variables:{limit:t,cursor:f.me.notifications.pageInfo.endCursor}})}),[f,x,t]),y=(0,i.useCallback)((()=>{c&&c.current&&c.current.scrollTop+c.current.clientHeight>=c.current.scrollHeight&&v()}),[v]);(0,i.useEffect)((()=>{c.current&&n&&y()}),[f,n,y]);const[w]=(0,ue.D)(vn,{optimisticResponse:{__typename:"Mutation",logNotificationImpression:!0},update(e){var t,n;null!==f&&void 0!==f&&null!==(t=f.me)&&void 0!==t&&null!==(n=t.notifications)&&void 0!==n&&n.nodes&&(f.me.notifications.nodes.forEach((t=>{t&&"IMPRESSED"!==t.status&&"CLICKED"!==t.status&&e.modify({id:e.identify(t),fields:{status:()=>"IMPRESSED"}})})),e.modify({id:e.identify(f.me),fields:{unreadNotificationCount:()=>0}}))}});(0,i.useEffect)((()=>{var e,t;const o=(null===f||void 0===f||null===(e=f.me)||void 0===e||null===(t=e.notifications)||void 0===t?void 0:t.nodes)||[];if(n&&!h&&o.length>0){var i;const e=null===(i=o[0])||void 0===i?void 0:i.createdAt;(!l.current||e>l.current)&&(w({variables:{latestTimestamp:e}}),l.current=e)}}),[f,h,n,w]);const j=(0,i.useMemo)((()=>{var e,t;return((null===f||void 0===f||null===(e=f.me)||void 0===e||null===(t=e.notifications)||void 0===t?void 0:t.nodes)||[]).reduce(((e,t)=>(t&&e.push(t),e)),new Array).sort(((e,t)=>(0,Kt.hT)(e.createdAt,t.createdAt)))}),[f]);let C;const{t:_}=(0,b.$G)();return C=h?(0,P.jsx)(Qt.Z,{}):f&&0!==j.length?j.map((e=>(0,P.jsx)(mn,{notification:e},e.id))):(0,P.jsx)(Pn,{children:_("notificationFeed.emptyStateContentMessage")}),(0,P.jsxs)(yn,{style:r,$reachMaxHeight:p,children:[(0,P.jsxs)(wn,{children:[(0,P.jsx)(jn,{children:_("notificationFeed.notificationsLabel")}),(0,P.jsx)(_n,{onClick:()=>o(!1),children:(0,P.jsx)(xn,{opacity:.4})})]}),(0,P.jsx)(Cn,{ref:c,onScroll:y,children:C})]})},In=n(1653);const Tn=f.ZP.span.withConfig({displayName:"QRCodeScreen__DialogTitle",componentId:"sc-1pevjki-0"})(["font-family:",";font-style:normal;font-weight:600;font-size:20px;line-height:22px;flex-grow:1;color:#ffffff;"],(e=>{let{theme:t}=e;return t.fonts.ui})),kn=f.ZP.div.withConfig({displayName:"QRCodeScreen__HStack",componentId:"sc-1pevjki-1"})(["display:flex;flex-direction:row;padding:0px;margin-bottom:21px;width:258px;height:24px;gap:auto;"]),Sn=f.ZP.div.withConfig({displayName:"QRCodeScreen__VStack",componentId:"sc-1pevjki-2"})(["display:flex;flex-direction:column;justify-content:center;"]),Zn=f.ZP.div.withConfig({displayName:"QRCodeScreen__ContentContainer",componentId:"sc-1pevjki-3"})(["display:flex;flex-direction:column;align-items:center;padding:24px;gap:20px;position:absolute;width:306px;height:350px;left:calc(50% - 306px / 2);top:calc(50% - 350px / 2);"]);var En=()=>{const e=(0,f.Fg)(),{t:t}=(0,b.$G)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(I.ZA,{}),(0,P.jsx)(I.hz,{width:306,height:350,children:(0,P.jsx)(Zn,{children:(0,P.jsxs)(Sn,{children:[(0,P.jsx)(kn,{children:(0,P.jsx)(Tn,{children:t("QRCodeScreen.scanToDownloadDialogTitle")})}),(0,P.jsx)(In.Z,{value:"https://apps.apple.com/us/app/tome-for-compelling-stories/id6443572526",size:258,level:"H",bgColor:e.colors.sheetBg,fgColor:e.colors.contrast})]})})})]})};function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ln=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,Mn(Mn({ref:t,viewBox:"0 0 64 64"},e),{},{children:(0,P.jsx)("path",{d:"M51.9952 50.0046H11.9952C9.78606 50.0046 7.9952 48.2137 7.9952 46.0046V18.0046C7.9952 15.7955 9.78606 14.0046 11.9952 14.0046H51.9952C54.2043 14.0046 55.9952 15.7955 55.9952 18.0046V46.0046C55.9952 48.2137 54.2043 50.0046 51.9952 50.0046ZM51.9952 23.0046C51.9952 22.4523 51.5475 22.0046 50.9952 22.0046H12.9952C12.4429 22.0046 11.9952 22.4523 11.9952 23.0046V27.0046C11.9952 27.5569 12.4429 28.0046 12.9952 28.0046H50.9952C51.5475 28.0046 51.9952 27.5569 51.9952 27.0046V23.0046Z"})})))),Dn=n(44196),Rn=n(4577),Bn=n(96012);const zn=(0,f.ZP)(Rn.fC).attrs({orientation:"vertical"}).withConfig({displayName:"Settingsstyles__Tabs",componentId:"w696vb-0"})(["display:grid;grid-template-areas:'menu content';grid-template-columns:166px 1fr;height:100%;outline:none;overflow:hidden;@media screen and (max-width:661px){grid-template-areas:'content';grid-template-columns:1fr;}"]),An=(0,f.ZP)(Rn.aV).withConfig({displayName:"Settingsstyles__Menu",componentId:"w696vb-1"})(["display:block;grid-area:menu;border-right:1px solid ",";padding:16px 12px;@media screen and (max-width:661px){display:none;}"],(e=>{let{theme:t}=e;return t.colors.contrast8})),Fn=f.ZP.div.withConfig({displayName:"Settingsstyles__MenuGroup",componentId:"w696vb-2"})(["list-style-type:none;margin:0;padding:0;margin-bottom:20px;"]),Hn=f.ZP.div.withConfig({displayName:"Settingsstyles__MenuGroupTitle",componentId:"w696vb-3"})(["font-size:",";line-height:1.3;padding:6px 8px;"],(e=>{let{theme:t}=e;return t.fontSizes.xxs})),Un=(0,f.ZP)(Rn.xz).withConfig({displayName:"Settingsstyles__MenuItem",componentId:"w696vb-4"})(["align-items:center;display:flex;cursor:pointer;color:",";font-size:",";line-height:1.25;padding:4px 8px;border-radius:",";background-color:",";text-align:left;transition:background-color 0.2s ease-out;width:100%;margin-bottom:2px;&:last-child{margin-bottom:none;}svg{height:20px;width:20px;min-width:20px;margin-left:0px;margin-right:8px;fill:currentColor;}&[data-state='active']{color:",";background-color:",";}&:hover{background-color:",";}&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.contrast40}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.borderRadius.sm}),(e=>{let{theme:t}=e;return t.colors.tabBackground}),(e=>{let{theme:t}=e;return t.colors.tabColor}),(e=>{let{theme:t}=e;return t.colors.tabBackgroundActive}),(e=>{let{theme:t}=e;return t.colors.tabBackgroundActive}),(e=>{let{theme:t}=e;return t.colors.tabBackgroundActive})),$n=(0,f.ZP)(en.Z).withConfig({displayName:"Settingsstyles__Avatar",componentId:"w696vb-5"})(["margin-right:8px;"]),Gn=f.ZP.span.withConfig({displayName:"Settingsstyles__MenuItemTextContent",componentId:"w696vb-6"})(["",""],q.wR),Wn=f.ZP.div.withConfig({displayName:"Settingsstyles__Content",componentId:"w696vb-7"})(["display:flex;flex-direction:column;grid-area:content;padding:0 32px;height:100%;overflow:hidden;outline:none;"]),qn=(0,f.ZP)(Rn.VY).withConfig({displayName:"Settingsstyles__TabContent",componentId:"w696vb-8"})(["height:100%;-webkit-overflow-scrolling:touch;overflow-y:auto;outline:none;"]),Vn=(0,f.ZP)(I.r6).withConfig({displayName:"Settingsstyles__Title",componentId:"w696vb-9"})(["margin-top:24px;margin-bottom:0;flex-shrink:0;"]),Kn=f.ZP.div.withConfig({displayName:"Settingsstyles__TitleContainer",componentId:"w696vb-10"})(["display:flex;flex-direction:row;align-items:center;flex:1;"]),Qn=f.ZP.div.withConfig({displayName:"Settingsstyles__FormContent",componentId:"w696vb-11"})(["display:flex;flex-direction:column;flex:1;"]),Jn=f.ZP.label.withConfig({displayName:"Settingsstyles__Label",componentId:"w696vb-12"})(["display:block;margin-top:16px;font-size:",";line-height:14px;color:",";"],(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.fieldLabel})),Xn=(0,f.ZP)(Bn.Z).attrs({variant:"fill"}).withConfig({displayName:"Settingsstyles__Input",componentId:"w696vb-13"})([""]),Yn=(0,f.ZP)(G.Z).attrs((e=>{let{disabled:t}=e;return{color:t?"default":"primary",disabled:t}})).withConfig({displayName:"Settingsstyles__Button",componentId:"w696vb-14"})(["min-width:auto;padding:0 12px;height:32px;"]),eo=f.ZP.div.withConfig({displayName:"Settingsstyles__InlineInputAndButtonContainer",componentId:"w696vb-15"})(["display:flex;gap:8px;padding-top:5px;& > ","{margin-top:0;}"],Xn),to=f.ZP.div.withConfig({displayName:"Settingsstyles__Actions",componentId:"w696vb-16"})(["display:flex;flex-direction:row;flex:0;padding:24px 0;"," + ","{margin-left:4px;}"],Yn,Yn),no=f.ZP.form.withConfig({displayName:"Settingsstyles__Form",componentId:"w696vb-17"})(["display:flex;flex-direction:column;flex:1;height:100%;"]),oo=(0,f.ZP)(Qn).withConfig({displayName:"Settingsstyles__WorkspaceFormContent",componentId:"w696vb-18"})(["margin-top:4px;"]);var io=n(7034);const ro={ADMIN:io.ZP.t("logic.settings.adminRoleLabel"),MEMBER:io.ZP.t("logic.settings.memberRoleLabel"),DEACTIVATED:io.ZP.t("logic.settings.deactivatedRoleLabel")},so={ADMIN:io.ZP.t("logic.settings.adminRoleActionLabelDropdownItem"),MEMBER:io.ZP.t("logic.settings.memberRoleActionLabelDropdownItem"),DEACTIVATED:io.ZP.t("logic.settings.deactivatedRoleActionLabelDropdownItem")};function ao(e){var t;return null===(t=e.slice())||void 0===t?void 0:t.sort(((e,t)=>(0,Kt.Fq)(e.name||e.email||"",t.name||t.email||"")))}var lo=n(40105),co=n(31343);const po=f.ZP.div.withConfig({displayName:"Membersstyles__Member",componentId:"y5csc9-0"})([""," display:flex;margin-bottom:20px;"],q.qc),uo=f.ZP.div.withConfig({displayName:"Membersstyles__MemberDetails",componentId:"y5csc9-1"})(["display:flex;flex-direction:column;justify-content:center;font-size:",";line-height:1.3;padding:0 10px;max-width:calc(100% - 36px - 55px);"],(e=>{let{theme:t}=e;return t.fontSizes.sm})),go=f.ZP.div.withConfig({displayName:"Membersstyles__MemberName",componentId:"y5csc9-2"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.contrast})),mo=f.ZP.span.withConfig({displayName:"Membersstyles__MemberEmail",componentId:"y5csc9-3"})(["color:",";"],(e=>{let{theme:t}=e;return t.colors.contrast60})),ho=f.ZP.span.withConfig({displayName:"Membersstyles__MemberAccess",componentId:"y5csc9-4"})(["color:",";margin-left:0.5ch;"],(e=>{let{theme:t}=e;return t.colors.contrast25})),fo=f.ZP.span.withConfig({displayName:"Membersstyles__StatusTag",componentId:"y5csc9-5"})([""," margin-left:0.5ch;"],q.OX),bo=f.ZP.span.withConfig({displayName:"Membersstyles__ResendTag",componentId:"y5csc9-6"})(["color:",";margin-left:0.5ch;cursor:pointer;&:hover{text-decoration:underline;}"],(e=>{let{theme:t}=e;return t.colors.uiAccent})),xo=f.ZP.span.withConfig({displayName:"Membersstyles__RoleTag",componentId:"y5csc9-7"})(["display:flex;align-items:center;"," border-radius:",";padding:4px 8px;margin:4px;font-size:",";margin-right:0;margin-left:auto;"],q.OX,(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{theme:t}=e;return t.fontSizes.sm})),vo=f.ZP.div.withConfig({displayName:"Membersstyles__RoleDropdownMemberRowPositioner",componentId:"y5csc9-8"})(["margin:auto 0 auto auto;padding:0;"]);var yo=n(26190);function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Co=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,jo(jo({ref:t,viewBox:"0 0 10 10"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.854 8.859a.5.5 0 01-.708 0l-3.15-3.15-3.147 3.147a.5.5 0 01-.708-.707L4.288 5 1.142 1.855a.5.5 0 01.707-.708l3.147 3.147 3.15-3.15a.5.5 0 11.707.708l-3.15 3.15 3.15 3.15a.5.5 0 010 .707z",fill:"currentColor"})})))),Po=n(74877),_o=n.n(Po),Oo=n(35639);const Io=f.ZP.span.withConfig({displayName:"TokenInputstyles__Delete",componentId:"sc-18lm62h-0"})(["display:inline-flex;align-items:center;justify-content:center;cursor:pointer;padding-right:7px;color:",";",";svg{width:10px;height:10px;fill-opacity:0.4;transition:fill-opacity 0.2s ease-out;}&:hover svg{fill-opacity:0.6;}"],(e=>{let{theme:t}=e;return t.colors.contrast}),(e=>{let{visible:t}=e;return t?(0,f.iv)(["visibility:visible;"]):(0,f.iv)(["pointer-events:none;visibility:hidden;"])})),To=f.ZP.button.attrs({type:"button"}).withConfig({displayName:"TokenInputstyles__TokenItem",componentId:"sc-18lm62h-1"})(["float:left;display:flex;align-items:center;margin:2px;padding-left:6px;height:22px;background:none;appearance:none;border-radius:",";background-color:",";color:",";transition:background-color 0.1s ease-out;&:focus{outline:1px solid ",";}",""],(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{theme:t,isEditing:n}=e;return n?"transparent":t.colors.buttonFilledBackground}),(e=>{let{theme:t,isValid:n}=e;return n?t.colors.contrast:t.colors.destructive}),(e=>{let{theme:t}=e;return t.colors.tomeBrandAccentHover}),(e=>{let{isEditing:t}=e;return!t&&(0,f.iv)(["&:hover{background-color:",";}"],(e=>{let{theme:t}=e;return t.colors.contrast12}))})),ko=(0,f.iv)(["display:inline-flex;align-items:center;margin:0;padding:0;border:0;padding-bottom:3px;padding-top:2px;outline:none;box-shadow:none;background:none;color:",";font-size:",";font-family:",";line-height:1;caret-color:",";"],(e=>{let{theme:t}=e;return t.colors.contrast}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.fonts.ui}),(e=>{let{theme:t}=e;return t.colors.uiAccent})),So=(0,f.ZP)(Oo.Z).withConfig({displayName:"TokenInputstyles__EditInput",componentId:"sc-18lm62h-2"})(["height:22px;margin-right:3px;input{"," color:",";}"],ko,(e=>{let{theme:t}=e;return t.colors.contrast})),Zo=f.ZP.span.withConfig({displayName:"TokenInputstyles__TokenValue",componentId:"sc-18lm62h-3"})([""," color:",";margin-right:5px;"],ko,(e=>{let{theme:t,isValid:n}=e;return n?t.colors.contrast:t.colors.destructive})),Eo=f.ZP.div.withConfig({displayName:"TokenInputstyles__TokenInputWrapper",componentId:"sc-18lm62h-4"})(["display:flex;flex:1;align-items:flex-start;"]),No=(0,f.ZP)(_o()).withConfig({displayName:"TokenInputstyles__TokenInput",componentId:"sc-18lm62h-5"})(["display:inline;font-size:",";font-family:inherit;width:100%;min-height:32px;padding:5px 6px;margin:-2px;.token-input-token-list{display:inline;}.token-input-autosized-wrapper{float:left;overflow:hidden;margin-right:4px;input{"," margin:2px 0;padding-left:6px;","::placeholder{color:",";}::-moz-placeholder{opacity:1;}}}"],(e=>{let{theme:t}=e;return t.fontSizes.sm}),ko,(e=>{let{placeholder:t}=e;return t&&(0,f.iv)(["min-width:92px;"])}),(e=>{let{theme:t}=e;return t.colors.placeholderText}));function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Do=e=>{let{tokenValue:t,tokenMeta:{activated:n},onEditStart:o,onEditEnd:r,onDelete:s,readOnly:a,validate:l}=e;const d=(0,i.useRef)(null),{0:c,1:p}=(0,i.useState)(""),u=(0,i.useCallback)((()=>{p(t),o()}),[p,t,o]);(0,i.useEffect)((()=>{n&&d.current&&d.current.getInput().focus()}),[n]);const g=(0,i.useCallback)((function(){let{reset:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=0===c.length;e||t?r():r(c.trim())}),[c,r]),m=(0,i.useCallback)((e=>{p(e.target.value)}),[p]),h=(0,i.useCallback)((e=>{"Escape"===e.key&&g({reset:!0}),["Enter"," "].includes(e.key)&&(e.stopPropagation(),e.preventDefault(),g())}),[g]),f=(0,i.useCallback)((e=>{"Backspace"===e.key&&s(),"Enter"===e.key&&(e.stopPropagation(),e.preventDefault(),u())}),[s,u]),b=(0,i.useCallback)((()=>{var e;null===(e=d.current)||void 0===e||e.getInput().select()}),[d]),x=(0,i.useCallback)((()=>{g()}),[g]),v=(0,i.useMemo)((()=>!l||l(t)),[l,t]);return(0,P.jsxs)(To,{"data-testid":"token_item","aria-label":`Edit ${t}`,onClick:yo.Z,onDoubleClick:a?void 0:u,onKeyDown:f,isValid:v,isEditing:n,children:[n?(0,P.jsx)(So,{ref:d,value:c,onChange:m,onKeyDown:h,onFocus:b,onBlur:x}):(0,P.jsx)(Zo,{isValid:v,children:t}),!n&&(0,P.jsx)(Io,{tabIndex:-1,"aria-label":`Delete ${t}`,visible:!a,onClick:e=>{e.stopPropagation(),s()},children:(0,P.jsx)(Co,{})})]})};var Ro=e=>{let{autoFocus:t,placeholder:n,values:o,onValuesChange:r,validate:s}=e;const{0:a,1:l}=(0,i.useState)(""),d=(0,i.useRef)(null);(0,i.useEffect)((()=>{if(d.current&&d.current.querySelector("input")){d.current.querySelector("input").name="Search"}}),[]);return(0,P.jsx)(Eo,{onKeyDown:e=>{if("Backspace"===e.key&&!a){var t;e.preventDefault();const o=null===(t=d.current)||void 0===t?void 0:t.querySelectorAll(`.token-input-token-list ${To}`);var n;if(o&&o.length>0)null===(n=o[o.length-1])||void 0===n||n.focus()}"Tab"===e.key&&a&&(e.preventDefault(),(()=>{var e,t,n,o;null===(e=d.current)||void 0===e||null===(t=e.querySelector("input"))||void 0===t||t.blur(),null===(n=d.current)||void 0===n||null===(o=n.querySelector("input"))||void 0===o||o.focus()})())},ref:d,children:(0,P.jsx)(No,{placeholder:o.length>0?void 0:n,tokenValues:o,autoFocus:t,separators:[",",";"," ","\n","\r","\r\n"],specialKeyDown:{onBackspace:0},onInputValueChange:l,onTokenValuesChange:r,customizeTokenComponent:e=>(0,P.jsx)(Do,Lo(Lo({},e),{},{validate:s}))})})};function Bo(e){let{members:t,emails:n}=e;const o=(null===t||void 0===t?void 0:t.map((e=>e.email)))||[];return n.filter((e=>!1===o.includes(e)))}function zo(e){let{members:t,invitations:n,emails:o,role:i,orgId:r}=e;return(0,d.oQf)({variables:{input:{role:i,emails:Bo({members:t,emails:o}),orgId:r}},optimisticResponse:{inviteUsers:{__typename:"InviteUsersResult",message:"",success:o}},update(e){!function(e,t,n,o){var i,r;const s=e.readQuery({query:d.gE$,variables:{includeInvitations:!0}});if(!s||null===(i=s.me)||void 0===i||!i.org)return;const a=t.map((t=>{const i=n?n.find((e=>e.email===t)):void 0;if(i)return void e.modify({id:`Invitation:${i.id}`,fields:{expired:()=>!1}});const r={__typename:"Invitation",email:t,id:t,role:o,expired:!1};return e.writeFragment({id:`Invitation:${t}`,fragment:d.Ydg,data:r,fragmentName:"InvitationFragment"})})).filter((e=>!!e));e.modify({id:e.identify(null===(r=s.me)||void 0===r?void 0:r.org),fields:{invitations:e=>[...e,...a]}})}(e,o,n,i)}})}var Ao=n(1027);const Fo=f.ZP.form.withConfig({displayName:"Invitesstyles__InviteSection",componentId:"sc-3ku77w-0"})(["position:sticky;top:0px;display:flex;padding-bottom:20px;gap:8px;background-color:",";"],(e=>{let{theme:t}=e;return t.colors.dialogBackground})),Ho=f.ZP.div.withConfig({displayName:"Invitesstyles__InputWrapper",componentId:"sc-3ku77w-1"})(["display:flex;flex:1;align-items:flex-start;background-color:",";border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.contrast8}),(e=>{let{theme:t}=e;return t.borderRadius.sm})),Uo=f.ZP.div.withConfig({displayName:"Invitesstyles__RoleDropdownInvitePositioner",componentId:"sc-3ku77w-2"})(["margin:4px;"]),$o=f.ZP.span.withConfig({displayName:"Invitesstyles__MemberCount",componentId:"sc-3ku77w-3"})(["padding-left:6px;color:",";"],(e=>{let{theme:t}=e;return t.colors.memberHelpText}));var Go,Wo=n(57509);function qo(){return qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qo.apply(this,arguments)}var Vo=function(e){return i.createElement("svg",qo({width:8,height:6,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Go||(Go=i.createElement("path",{d:"M1 1l2.539 3.047a.6.6 0 00.922 0L6.999 1",stroke:"#fff",strokeOpacity:.4,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};const Ko=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleDropdownWrapper",componentId:"js3r27-0"})(["display:flex;align-items:center;justify-content:center;"]),Qo=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleName",componentId:"js3r27-1"})(["font-size:",";line-height:1.5;"],(e=>{let{theme:t}=e;return t.fontSizes.sm})),Jo=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleDescription",componentId:"js3r27-2"})(["color:",";font-size:",";line-height:1.2;li:hover &{color:",";}"],(e=>{let{theme:t}=e;return t.colors.secondaryUiText}),(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.contrast})),Xo=(0,f.ZP)(Vo).withConfig({displayName:"RoleDropdown__DropdownArrow",componentId:"js3r27-3"})(["align-self:middle;display:inline-flex;margin:0.1em 0 0 0.35em;"]),Yo=f.ZP.button.withConfig({displayName:"RoleDropdown__RoleDropdownTrigger",componentId:"js3r27-4"})(["appearance:none;background:none;cursor:pointer;display:flex;align-items:center;color:",";border-radius:",";padding:4px 8px;font-size:",";transition:background-color 0.075s ease-in-out;@media ","{&:hover{background-color:",";}}"],(e=>{let{theme:t}=e;return t.colors.secondaryUiText}),(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),Wo.be.mouse,(e=>{let{theme:t}=e;return t.colors.buttonTransparentBackgroundHover})),ei=f.ZP.div.withConfig({displayName:"RoleDropdown__RoleMenu",componentId:"js3r27-5"})(["width:100%;white-space:break-spaces;"]);var ti=e=>{let{role:t,setRole:n,handleDeactivation:o}=e;const{t:r}=(0,b.$G)(),s=(0,i.useMemo)((()=>t===d.nJN.Deactivated?[{text:r("settings.members.roleDropdown.restoreAsMemberDropdownItem"),action:()=>n(d.nJN.Member)}]:[{id:"admin",text:(0,P.jsxs)(ei,{children:[(0,P.jsx)(Qo,{children:so.ADMIN}),(0,P.jsx)(Jo,{children:r("settings.members.roleDropdown.adminRoleDescriptionDropdownItem")})]}),action:()=>{t!==d.nJN.Admin&&n(d.nJN.Admin)},checked:t===d.nJN.Admin},{id:"member",text:(0,P.jsxs)(ei,{children:[(0,P.jsx)(Qo,{children:so.MEMBER}),(0,P.jsx)(Jo,{children:r("settings.members.roleDropdown.memberRoleDescriptionDropdownItem")})]}),action:()=>{t!==d.nJN.Member&&n(d.nJN.Member)},checked:t===d.nJN.Member},...o?[{type:"separator"},{id:"deactivate",text:(0,P.jsx)(ei,{children:(0,P.jsx)(Qo,{children:so.DEACTIVATED})}),action:o,variant:"destructive"}]:[]]),[o,t,n,r]);return(0,P.jsx)(Ko,{children:(0,P.jsx)(we.Z,{menuWidth:190,menuPosition:"below",menuAlign:"right",itemsOrFn:s,children:(0,P.jsxs)(Yo,{type:"button",children:[ro[t]," ",(0,P.jsx)(Xo,{})]})})})};const ni=f.ZP.h3.withConfig({displayName:"Commonstyles__SectionHeading",componentId:"sc-8lnthi-0"})(["font-size:13px;line-height:16px;font-weight:400;margin-bottom:8px;"]),oi=f.ZP.div.withConfig({displayName:"Commonstyles__HelpText",componentId:"sc-8lnthi-1"})(["font-size:11px;line-height:13px;color:",";padding:4px 0;"],(e=>{let{theme:t}=e;return t.colors.memberHelpText}));var ii=e=>{var t;let{members:n,invitations:r}=e;const{activeMembership:s}=(0,i.useContext)(k.Z),{0:a,1:l}=(0,i.useState)([]),{0:c,1:p}=(0,i.useState)(d.nJN.Member),u=i.useRef(null),{t:g}=(0,b.$G)(io.CJ,{keyPrefix:"settings.members.invites"}),m=!!a.length&&a.some(Ao.G),[h,{loading:f}]=zo({members:n,invitations:r,emails:a.filter(Ao.G),role:c,orgId:(null===s||void 0===s||null===(t=s.org)||void 0===t?void 0:t.id)||""}),x=(0,i.useCallback)((async e=>{if(e.preventDefault(),m&&!f)try{var t,n,i,r;const e=await h(),o=(null===(t=e.data)||void 0===t||null===(n=t.inviteUsers)||void 0===n||n.error,(null===(i=e.data)||void 0===i||null===(r=i.inviteUsers)||void 0===r?void 0:r.success)||[]);l([]),(0,M.Sd)({message:g("numberOfUserInvitedToWorkspaceToastMessage_with_count",{count:o.length})})}catch(s){console.log(s),o.v.addError(s),(0,M.Sd)({message:g("anErrorOccurredWhileInvitingUsersToWorkspaceToastMessage")})}}),[m,f,h,l,g]),v=(0,i.useCallback)((e=>{var t;"Enter"===e.key&&document.activeElement!==u.current&&(e.preventDefault(),e.stopPropagation(),null===(t=u.current)||void 0===t||t.focus())}),[u]),y=(null===s||void 0===s?void 0:s.role)===d.nJN.Admin;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(ni,{children:[g("heading"),(0,P.jsx)($o,{children:null===n||void 0===n?void 0:n.length})]}),(0,P.jsxs)(Fo,{onSubmit:x,onKeyDown:v,children:[(0,P.jsxs)(Ho,{"data-testid":"invite_input",children:[(0,P.jsx)(Ro,{autoFocus:!0,placeholder:g("inviteViaEmailPlaceholderText"),values:a,onValuesChange:l,validate:Ao.G}),y&&(0,P.jsx)(Uo,{children:(0,P.jsx)(ti,{role:c,setRole:p})})]}),(0,P.jsx)(Yn,{ref:u,type:"submit",disabled:!m||f,children:g("inviteButtonLabel")})]})]})};function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ai=(0,i.forwardRef)(((e,t)=>(0,P.jsx)(A.Z,si(si({ref:t,viewBox:"0 0 48 48"},e),{},{children:(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 48V48C10.7452 48 0 37.2548 0 24C5.79387e-07 10.7452 10.7452 0 24 0C37.2548 5.79387e-07 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48ZM24.0013 9.01C18.6325 9.01 14.9974 13.1536 14.9974 18.6547C14.9974 25.0447 19.1952 29.0136 24.0013 29.0136C28.8074 29.0136 33.0052 25.0446 33.0052 18.6547C33.0052 13.1537 29.37 9.01 24.0013 9.01ZM24.0013 31.9963C17.3831 31.9963 12.884 34.3063 10.3742 37.3119V37.3119C10.0254 37.7173 10.0543 38.3248 10.4401 38.6952V38.6952C18.0972 45.7686 29.9051 45.7681 37.5616 38.694V38.694C37.9474 38.3235 37.9763 37.7161 37.6273 37.3107C35.1172 34.3052 30.6187 31.9964 24.0011 31.9964L24.0013 31.9963Z",fill:"currentColor"})})))),li=f.ZP.div.withConfig({displayName:"AvatarPending__Avatar",componentId:"cbb5sn-0"})(["color:",";width:","px;height:","px;"],(e=>{let{theme:t}=e;return t.colors.contrast16}),(e=>{let{size:t}=e;return t}),(e=>{let{size:t}=e;return t}));var di=e=>{let{size:t}=e;return(0,P.jsx)(li,{size:t,children:(0,P.jsx)(ai,{})})};function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var pi,ui=e=>{let{invitation:t,orgId:n}=e;const{t:r}=(0,b.$G)(),{0:s,1:a}=(0,i.useState)(!1),[l]=(0,d.oQf)(),c=(0,i.useCallback)((()=>{a(!0),l({variables:{input:{role:t.role,emails:[t.email],orgId:n}},optimisticResponse:{inviteUsers:{__typename:"InviteUsersResult",message:"",success:[t.email]}},update(e){e.modify({id:e.identify(t),fields:{expired:()=>!1}})}}).then((e=>{var t,n;null!==(t=e.data)&&void 0!==t&&null!==(n=t.inviteUsers)&&void 0!==n&&n.error&&(0,M.Sd)({message:r("settings.members.resendInvite.inviteFailedReloadAndTryAgainToastErrorMessage")})})).catch((e=>{o.v.addError(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),(0,M.Sd)({message:r("settings.members.resendInvite.inviteFailedReloadAndTryAgainToastErrorMessage")})})),(0,M.Sd)({message:r("settings.members.resendInvite.newInvitationSentToastMessage")})}),[l,t,n,a,r]);return s?null:(0,P.jsx)(bo,{onClick:c,children:r("settings.members.resendInvite.resendButtonLabel")})},gi=n(59715),mi=n.n(gi),hi=n(21565),fi=n(89030),bi=n(38156);!function(e){e.GLOBAL="GLOBAL",e.LIGHT="LIGHT",e.DARK="DARK"}(pi||(pi={}));var xi=pi;const vi="88px",yi=(0,f.ZP)(bi.Z).withConfig({displayName:"Organizationstyles__ManageLogoButton",componentId:"sc-1y9qbvj-0"})(["box-shadow:",";background-color:",";&:hover{box-shadow:",";}& ","{background:",";}}"],(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBoxShadow}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBackground}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBoxShadowHover}),G.e,(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoButtonBackground})),wi=f.ZP.div.withConfig({displayName:"Organizationstyles__CheckboxContainer",componentId:"sc-1y9qbvj-1"})(["display:flex;align-items:center;margin-top:8px;margin-bottom:8px;"]),ji=(0,f.ZP)(Jn).withConfig({displayName:"Organizationstyles__CheckboxLabel",componentId:"sc-1y9qbvj-2"})(["margin-top:0;margin-left:9px;"]),Ci=f.ZP.div.withConfig({displayName:"Organizationstyles__LogoDescription",componentId:"sc-1y9qbvj-3"})(["margin-top:8px;font-size:",";color:",";line-height:11px;a{color:",";text-decoration:underline;}"],(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoDescriptionText}),(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoDescriptionText})),Pi=(0,f.ZP)(Xn).withConfig({displayName:"Organizationstyles__UploadLogoInput",componentId:"sc-1y9qbvj-4"})(["clip:rect(0 0 0 0);clip-path:inset(100%);height:1px;overflow:hidden;position:absolute;width:1px;white-space:nowrap;"]),_i=f.ZP.div.withConfig({displayName:"Organizationstyles__LogoManagementContainer",componentId:"sc-1y9qbvj-5"})(["margin-top:0px;height:",";width:100%;border-radius:",";"],vi,(e=>{let{theme:t}=e;return t.borderRadius.xs})),Oi=f.ZP.div.withConfig({displayName:"Organizationstyles__LogoBackground",componentId:"sc-1y9qbvj-6"})(["display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;height:",";width:100%;background:",";border-radius:",";cursor:",";"],vi,(e=>{let{theme:t,logoType:n}=e;return(e=>({[xi.GLOBAL]:e.colors.orgSettingsLogoGlobalBackground,[xi.DARK]:e.colors.orgSettingsLogoBackground,[xi.LIGHT]:e.colors.orgSettingsLogoBackground}))(t)[n]}),(e=>{let{theme:t}=e;return t.borderRadius.xs}),(e=>{let{cursor:t}=e;return t||"default"})),Ii=f.ZP.div.withConfig({displayName:"Organizationstyles__RemoveLogoButtonBackground",componentId:"sc-1y9qbvj-7"})(["opacity:0;display:flex;transition:opacity 0.3s;position:absolute;flex-direction:column;align-items:center;justify-content:center;top:0;bottom:0;left:0;right:0;background:",";border-radius:",";"],(e=>{let{theme:t}=e;return t.colors.orgSettingsRemoveLogoButtonBackground}),(e=>{let{theme:t}=e;return t.borderRadius.xs})),Ti=f.ZP.div.withConfig({displayName:"Organizationstyles__UploadedLogoContainer",componentId:"sc-1y9qbvj-8"})(["display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;height:",";background:transparent;&:hover ","{opacity:1;}"],vi,Ii),ki=f.ZP.h2.withConfig({displayName:"Organizationstyles__SettingsHeading",componentId:"sc-1y9qbvj-9"})(["display:block;margin-top:16px;margin-bottom:0px;font-size:",";line-height:14px;color:",";font-weight:normal;"],(e=>{let{theme:t}=e;return t.fontSizes.xxs}),(e=>{let{theme:t}=e;return t.colors.fieldLabel})),Si=f.ZP.div.withConfig({displayName:"Organizationstyles__ThemedLogoContainer",componentId:"sc-1y9qbvj-10"})(["display:grid;grid-template-columns:1fr 1fr;column-gap:16px;"]),Zi=f.ZP.p.withConfig({displayName:"Organizationstyles__UploadDescription",componentId:"sc-1y9qbvj-11"})(["font-size:11px;line-height:13px;color:",";margin:0;margin-top:8px;"],(e=>{let{theme:t}=e;return t.colors.orgSettingsLogoDescriptionText})),Ei=f.ZP.div.withConfig({displayName:"FeatureCallout__Container",componentId:"sc-1izgeh4-0"})(["display:flex;flex-direction:column;align-items:flex-start;gap:8px;flex:none;order:2;flex-grow:0;"]),Ni=f.ZP.div.withConfig({displayName:"FeatureCallout__Row",componentId:"sc-1izgeh4-1"})(["width:100%;padding:12px;border-radius:",";background:",";display:flex;flex-direction:row;gap:8px;align-items:center;"],(e=>{let{theme:t}=e;return t.borderRadius.sm}),(e=>{let{theme:t}=e;return t.colors.orgSettingsFeatureCalloutBackground})),Mi=f.ZP.div.withConfig({displayName:"FeatureCallout__HeadingAndTextContainer",componentId:"sc-1izgeh4-2"})(["display:flex;flex-direction:column;gap:2px;flex-grow:2;"]),Li=f.ZP.div.withConfig({displayName:"FeatureCallout__HeadingContainer",componentId:"sc-1izgeh4-3"})(["display:flex;gap:8px;"]),Di=f.ZP.div.withConfig({displayName:"FeatureCallout__Heading",componentId:"sc-1izgeh4-4"})(["color:",";font-size:13px;font-weight:500;line-height:16px;"],(e=>{let{theme:t}=e;return t.colors.orgSettingsFeatureCalloutTitleText})),Ri=f.ZP.div.withConfig({displayName:"FeatureCallout__Text",componentId:"sc-1izgeh4-5"})(["color:",";font-size:13px;line-height:16px;"],(e=>{let{theme:t}=e;return t.colors.orgSettingsFeatureCalloutBodyText})),Bi=(0,f.ZP)(G.Z).withConfig({displayName:"FeatureCallout__Button",componentId:"sc-1izgeh4-6"})(["padding:4px 10px 5px;min-width:auto;"]);var zi=e=>{let{heading:t,text:n}=e;const{t:o}=(0,b.$G)(),{openSettings:r}=(0,oe.r)(),s=(0,i.useCallback)((()=>{r(ie.u.PLANS)}),[r]);return(0,P.jsxs)(Ei,{children:[(0,P.jsx)(ki,{children:t}),(0,P.jsxs)(Ni,{children:[(0,P.jsxs)(Mi,{children:[(0,P.jsxs)(Li,{children:[(0,P.jsx)(Di,{children:o("settings.organization.featurecallout.heading")}),(0,P.jsx)(fi.gQ,{})]}),(0,P.jsx)(Ri,{children:n})]}),(0,P.jsx)(Bi,{onClick:s,children:o("settings.organization.featurecallout.buttontext")})]})]})};const Ai=f.ZP.div.withConfig({displayName:"AllowedDomainsstyles__Wrapper",componentId:"sc-1yf9ojs-0"})(["","{margin-top:0;}"],ki);var Fi=()=>{var e,t,n,o;const{t:i}=(0,b.$G)(io.CJ,{keyPrefix:"settings.members.allowedDomains"}),{priceType:r}=(0,D.Z)(),s=null!==r,{data:a,refetch:l}=(0,d.O3L)(),[c]=(0,d.pFu)({onError:e=>{(0,M.Sd)({message:e.message}),l()}}),p=(null===a||void 0===a||null===(e=a.me)||void 0===e||null===(t=e.org)||void 0===t?void 0:t.emailDomains)||[],u=null===a||void 0===a||null===(n=a.me)||void 0===n||null===(o=n.org)||void 0===o?void 0:o.id,g=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Ho,{"data-testid":"allowed_domains",children:(0,P.jsx)(Ro,{autoFocus:!0,placeholder:i("placeholder"),values:p,onValuesChange:e=>{const t=e.map((e=>(0,hi.Z)(e,"@")));u&&c({variables:{orgId:u,emailDomains:t,queryEmailDomains:!0},update(e,t){var n;let{data:o}=t;const i=null===o||void 0===o||null===(n=o.updateOrganization)||void 0===n?void 0:n.emailDomains;void 0!==i&&null!==i&&e.modify({id:`Organization:${u}`,fields:{emailDomains:()=>i}})},optimisticResponse:{__typename:"Mutation",updateOrganization:{__typename:"Organization",id:u,emailDomains:t,name:"",slug:"",showTomeBranding:!1}}})},validate:mi()})}),(0,P.jsx)(oi,{children:i("helpText")})]}),m=(0,P.jsx)(zi,{heading:p.length>0?i("upsell.header",{val:p,style:"long",type:"conjunction"}):"",text:i("upsell.text")});return(0,P.jsxs)(Ai,{children:[(0,P.jsx)(ni,{children:i("heading")}),s?g:m]})};function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $i=()=>{var e,t,n;const o=(0,co.s)(),r=(0,i.useRef)(),{t:s}=(0,b.$G)(),{data:a,loading:l}=(0,d.vj0)({variables:{includeInvitations:!0,includeGuests:!0,includeDeactivated:!0},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"}),{activeMembership:c}=(0,i.useContext)(k.Z),p=null===c||void 0===c||null===(e=c.org)||void 0===e?void 0:e.name,u=p?`${s("settings.members.membersTabInWorkspaceSettings.organizationNameAndMemberTitle",{organizationName:p})}`:`${s("settings.members.membersTabInWorkspaceSettings.membersTitle")}`,g=null===a||void 0===a||null===(t=a.me)||void 0===t?void 0:t.org,m=(null===g||void 0===g||null===(n=g.membersWithRoles)||void 0===n?void 0:n.filter((e=>{let{user:t}=e;return!!t})).map((e=>{let{user:t,role:n}=e;return Ui(Ui({},t),{},{email:(null===t||void 0===t?void 0:t.email)||"",role:n||d.nJN.Member})})))||[],h=(null===g||void 0===g?void 0:g.invitations)||[],f=(null===g||void 0===g?void 0:g.guests)||[],[x]=(0,d.LzE)(),v=(null===c||void 0===c?void 0:c.role)===d.nJN.Admin,y=(0,lo.Z)((e=>async t=>{v?null!==g&&void 0!==g&&g.id?await x({variables:{userId:e,orgId:g.id,role:t},update(n){n.modify({id:`Organization:${g.id}`,fields:{membersWithRoles(n,o){let{readField:i}=o;return n.map((n=>i("id",n.user)===e?{user:n.user,role:t}:n))}}})}}).catch((()=>{(0,M.Sd)({message:s("settings.members.membersTabInWorkspaceSettings.failedToUpdateMemberRoleToastErrorMessage")})})):(0,M.Sd)({message:s("settings.members.membersTabInWorkspaceSettings.unknownWorkspaceToastMessage")}):(0,M.Sd)({message:s("settings.members.membersTabInWorkspaceSettings.notEnoughPermissionToastMessage")})}),[x,v,null===g||void 0===g?void 0:g.id,s]),w=(0,i.useCallback)((()=>{r.current&&(y(r.current)(d.nJN.Deactivated),o.close(),r.current=void 0)}),[o,y]),j=(0,lo.Z)((e=>()=>{o.open(),r.current=e}),[o]),C=(0,i.useCallback)((()=>{o.close()}),[o]),_=(0,i.useCallback)((()=>{r.current=void 0}),[]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Kn,{children:(0,P.jsx)(Vn,{children:l?(0,P.jsx)(P.Fragment,{children:"\xa0"}):u})}),!l&&(0,P.jsxs)(P.Fragment,{children:[v&&(0,P.jsx)(Fi,{}),(0,P.jsx)(ii,{members:m,invitations:h}),ao(m).map((e=>{var t;return(0,P.jsxs)(po,{children:[(0,P.jsx)(en.Z,{size:36,user:e}),(0,P.jsxs)(uo,{children:[(0,P.jsx)(go,{children:e.name}),(0,P.jsx)(mo,{children:e.email})]}),v&&(null===a||void 0===a||null===(t=a.me)||void 0===t?void 0:t.id)!==e.id?(0,P.jsx)(vo,{children:(0,P.jsx)(ti,{role:e.role,setRole:y(e.id),handleDeactivation:j(e.id)})}):(0,P.jsx)(xo,{children:ro[e.role]})]},e.id)})),ao(f).map((e=>(0,P.jsxs)(po,{children:[(0,P.jsx)(en.Z,{size:36,user:e}),(0,P.jsxs)(uo,{children:[(0,P.jsx)(go,{children:e.name}),e.name!==e.email&&(0,P.jsxs)(mo,{children:[e.email," ",(0,P.jsx)(ho,{children:s("settings.members.membersTabInWorkspaceSettings.numberOfTomesUserCanAccess_with_count",{count:e.numGuestTomes})})]})]}),(0,P.jsx)(xo,{children:s("settings.members.membersTabInWorkspaceSettings.guestRoleTagForGuestMember")})]},e.id))),ao(h).map((e=>(0,P.jsxs)(po,{children:[(0,P.jsx)(di,{size:36}),(0,P.jsx)(uo,{children:(0,P.jsxs)(mo,{children:[e.email," ",(0,P.jsx)(fo,{children:e.expired?s("settings.members.membersTabInWorkspaceSettings.expiredInvitationStatusLabel"):s("settings.members.membersTabInWorkspaceSettings.invitedStatusTagLabel")}),(null===g||void 0===g?void 0:g.id)&&(0,P.jsx)(ui,{invitation:e,orgId:g.id})]})}),(0,P.jsx)(xo,{children:ro[e.role]})]},e.id))),(0,P.jsx)(co.Z,{ref:o.ref,title:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalTitle"),subtitle:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalSubtitle"),dismissible:!0,buttonColor:"destructive",cancelButtonText:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalCancelButtonLabel"),cancelButtonAction:C,primaryButtonContent:s("settings.members.membersTabInWorkspaceSettings.deactivateUserConfirmationModalDeactivateButtonLabel"),primaryButtonAction:w,onClose:_},"confirmationModal")]})]})},Gi=n(79271),Wi=n(88902);const qi=(0,f.ZP)(Gi.Z).attrs({width:8,height:8,viewBox:"0 0 10 10"}).withConfig({displayName:"Account__DropdownArrow",componentId:"sc-5v23bu-0"})(["stroke:currentColor;min-width:8px;"]),Vi=f.ZP.div.withConfig({displayName:"Account__RowText",componentId:"sc-5v23bu-1"})(["",""],q.wR),Ki=f.ZP.div.withConfig({displayName:"Account__Row",componentId:"sc-5v23bu-2"})(["display:flex;justify-content:space-between;gap:8px;align-items:center;font-family:",";font-weight:'normal';width:100%;"],(e=>{let{theme:t}=e;return t.fonts.ui})),Qi=(0,f.ZP)(G.Z).withConfig({displayName:"Account__DropdownTrigger",componentId:"sc-5v23bu-3"})(["padding:0px 8px;justify-content:flex-start;width:100%;line-height:16px;& span{width:100%;}"]),Ji=(0,f.ZP)(Jn).withConfig({displayName:"Account__LanguageSelectorLabel",componentId:"sc-5v23bu-4"})(["margin-bottom:5px;"]);var Xi=e=>{let{user:t}=e;const{0:n,1:o}=(0,i.useState)(t.name||""),{data:r}=(0,d.OEm)(),s=(0,i.useMemo)((()=>(null===r||void 0===r?void 0:r.supportedLanguages.find((e=>{var n;return e.languageTag===(null===(n=t.preferences)||void 0===n?void 0:n.language)})))??null),[t.preferences,null===r||void 0===r?void 0:r.supportedLanguages]),[a,{loading:l}]=(0,d.Ioo)(),c=(0,Wi.W9)(Wi.TT.LANGUAGE_SELECTOR),p=(0,i.useMemo)((()=>n.length>0),[n]),u=(0,i.useMemo)((()=>n!==t.name),[n,t.name]),{t:g}=(0,b.$G)(),[m]=(0,d.gze)(),h=(0,i.useCallback)((async e=>{let{languageId:n,languageTag:o}=e;t.id&&o&&o!==(null===s||void 0===s?void 0:s.languageTag)&&(await m({variables:{userId:t.id,language:n}}),Object.keys(io.Jb).includes(o)&&((0,io.CO)(o),window.location.reload()))}),[null===s||void 0===s?void 0:s.languageTag,m,t.id]),f=(0,i.useMemo)((()=>(null===r||void 0===r?void 0:r.supportedLanguages.map((e=>{const{languageId:t,description:n}=e;return{text:n,checked:(null===s||void 0===s?void 0:s.languageId)===t,action:()=>h(e)}})))||[]),[null===r||void 0===r?void 0:r.supportedLanguages,null===s||void 0===s?void 0:s.languageId,h]),x=(0,i.useCallback)((async e=>{if(e.preventDefault(),!l&&p&&t.id)try{await a({variables:{userId:t.id,name:n}})}catch{(0,M.Sd)({message:g("workspace.genericErrorMessage")})}}),[l,p,t.id,a,n,g]);return(0,P.jsxs)(no,{onSubmit:x,"data-testid":"account_form",children:[(0,P.jsx)(Vn,{children:g("settings.title.myAccount")}),(0,P.jsxs)(oo,{children:[(0,P.jsxs)(Jn,{children:[g("settings.label.nameOfUser"),(0,P.jsx)(Xn,{type:"text",placeholder:g("settings.placeholder.nameOfUser"),value:n,onChange:e=>o(e.target.value),disabled:l})]}),(0,P.jsxs)(Jn,{children:[g("settings.label.userEmail"),(0,P.jsx)(Xn,{type:"text",placeholder:g("settings.placeholder.userEmail"),disabled:!0,value:null===t||void 0===t?void 0:t.email})]}),c&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Ji,{style:{marginBottom:5},children:g("settings.label.language")}),(0,P.jsx)(we.Z,{menuWidth:650,menuPosition:"below",menuAlign:"left",itemsOrFn:f,disabled:!s,children:(0,P.jsx)(Qi,{type:"button","data-testid":"language_selector_dropdown_trigger",disabled:!s,isSegment:!0,children:(0,P.jsxs)(Ki,{children:[(0,P.jsx)(Vi,{children:(null===s||void 0===s?void 0:s.description)??""}),(0,P.jsx)(qi,{"data-testid":"language_selector_dropdown_arrow"})]})})})]})]}),(0,P.jsx)(to,{children:(0,P.jsx)(Yn,{type:"submit",color:"primary",disabled:!p||!u||l,children:g("settings.label.updateButton")})})]})},Yi=n(36409),er=n(62830),tr=n.n(er),nr=n(94196),or=n(35247),ir=n(25675),rr=n.n(ir),sr=n(98838);const ar={[xi.GLOBAL]:io.ZP.t("settings.organization.logoUpload.allBackgroundsLogoTypeLabel"),[xi.DARK]:io.ZP.t("settings.organization.logoUpload.darkBackgroundLogoTypeLabel"),[xi.LIGHT]:io.ZP.t("settings.organization.logoUpload.lightBackgroundLogoTypeLabel")};var lr=e=>{let{logoType:t,logo:n,onUpload:o,onRemove:r}=e;const{t:s}=(0,b.$G)(),a=(0,i.useRef)(null),l=(0,i.useCallback)((()=>{var e;null===(e=a.current)||void 0===e||e.click()}),[]);return(0,P.jsx)(_i,{children:(0,P.jsx)(u.Z,{theme:t===xi.LIGHT?p.f8:p.$J,children:n?(0,P.jsxs)(Ti,{"data-testid":`uploaded_logo_${t.toLowerCase()}`,children:[(0,P.jsx)(Oi,{logoType:t,children:(0,P.jsx)(rr(),{src:n,layout:"fixed",objectFit:"contain",height:"36px",width:"120px",loader:sr.Z})}),(0,P.jsx)(Ii,{"data-testid":"remove_logo",children:(0,P.jsx)(yi,{type:"button",onClick:r,actionText:s("settings.organization.logoUpload.removeLogoButtonLabel")})})]}):(0,P.jsxs)(Oi,{"data-testid":`upload_logo_${t.toLowerCase()}`,onClick:l,logoType:t,cursor:"pointer",children:[(0,P.jsx)(Pi,{ref:a,type:"file",id:"logoImage",name:"logoImage",accept:"image/png, image/svg+xml",onChange:o}),(0,P.jsx)(yi,{actionText:s("settings.organization.logoUpload.uploadLogoButtonLabel")}),(0,P.jsx)(Zi,{logoType:t,children:s("settings.organization.logoUpload.logoTypeDescription",{logoBackgroundType:ar[t]})})]})})})};function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pr=e=>{var t,n,r,s,a;let{org:l}=e;const{t:c}=(0,b.$G)(),p=(0,co.s)(),{0:u,1:g}=(0,i.useState)(),h=!(null===l||void 0===l||null===(t=l.logo)||void 0===t||!t.shouldUseThemedLogo),{apolloClient:f}=(0,m.bp)(),[x]=(0,d.pFu)(),v=(0,i.useCallback)((async()=>{l.id&&await x({variables:{orgId:l.id,logo:{shouldUseThemedLogo:!h}},update:e=>{e.modify({id:e.identify(l),fields:{logo(){return cr(cr({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{shouldUseThemedLogo:!h})}}})},optimisticResponse:{updateOrganization:{__typename:"Organization",id:l.id,name:l.name,slug:l.slug,showTomeBranding:l.showTomeBranding,logo:{__typename:"OrgLogo",shouldUseThemedLogo:!h}}}})}),[l,x,h]),y=(0,i.useCallback)((e=>{g(e),p.open()}),[p]),w=(0,i.useCallback)((()=>{g(void 0),p.close()}),[p]),j=(0,i.useCallback)((async()=>{var e;if(!l.id)return;const t=cr(cr(cr({shouldUseThemedLogo:null===(e=l.logo)||void 0===e?void 0:e.shouldUseThemedLogo},u===xi.GLOBAL&&{imagePath:null,logoImagePathGlobal:null}),u===xi.DARK&&{logoImagePathDark:null}),u===xi.LIGHT&&{logoImagePathLight:null});try{await x({variables:{orgId:l.id,logo:t}}),(0,M.Sd)({message:c("settings.organization.organizationLogo.logoSuccessfullyRemovedToastMessage")})}catch(n){o.v.addError(n,{orgId:l.id}),(0,M.Sd)({message:c("settings.organization.organizationLogo.errors.logoCanNotBeRemovedErrorToastMessage")})}p.close()}),[l.id,x,null===(n=l.logo)||void 0===n?void 0:n.shouldUseThemedLogo,p,u,c]),C=(0,i.useCallback)(((e,t)=>{const n=(t.target.files||[])[0];if(!n)throw new Error("File not found");(0,nr.y)({apolloClient:f,orgId:l.id,onUploadComplete:async t=>{let{imagePath:n}=t;await x({variables:{orgId:l.id,logo:cr(cr(cr({},e===xi.GLOBAL&&{logoImagePathGlobal:n,imagePath:n}),e===xi.DARK&&{logoImagePathDark:n}),e===xi.LIGHT&&{logoImagePathLight:n})}}),(0,M.Sd)({message:c("settings.organization.organizationLogo.logoSuccessfullyAddedToastMessage")})},file:n,onUploadError:e=>{o.v.addError(e,{orgId:l.id}),(0,M.Sd)({message:c("settings.organization.organizationLogo.errors.logoCanNotBeUpdatedErrorToastMessage")})},uploadId:`orgLogo:${tr()()}`})}),[f,l.id,x,c]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ki,{children:c("settings.organization.logo.heading")}),(0,P.jsxs)(wi,{children:[(0,P.jsx)(or.Z,{id:"toggle_themed_logos","data-testid":"toggle_themed_logos",height:14,width:14,checked:h,onClick:v}),(0,P.jsx)(ji,{htmlFor:"toggle_themed_logos",children:c("settings.organization.organizationLogo.useDifferentLogoBackgroundsCheckboxLabel")})]}),h?(0,P.jsxs)(Si,{children:[(0,P.jsx)(lr,{logoType:xi.DARK,logo:null===(r=l.logo)||void 0===r?void 0:r.imageUrlDark,onUpload:e=>C(xi.DARK,e),onRemove:()=>y(xi.DARK)}),(0,P.jsx)(lr,{logoType:xi.LIGHT,logo:null===(s=l.logo)||void 0===s?void 0:s.imageUrlLight,onUpload:e=>C(xi.LIGHT,e),onRemove:()=>y(xi.LIGHT)})]}):(0,P.jsx)(lr,{logoType:xi.GLOBAL,logo:null===(a=l.logo)||void 0===a?void 0:a.imageUrlGlobal,onUpload:e=>C(xi.GLOBAL,e),onRemove:()=>y(xi.GLOBAL)}),(0,P.jsx)(Ci,{children:c("settings.organization.organizationLogo.logoAppearanceAndFormatDescription")}),(0,P.jsx)(co.Z,{ref:p.ref,title:c("settings.organization.organizationLogo.removeLogoConfirmationModalTitle"),subtitle:c("settings.organization.organizationLogo.removeLogoConfirmationModalSubtitle"),dismissible:!0,buttonColor:"destructive",cancelButtonText:c("settings.organization.organizationLogo.removeLogoConfirmationModalCancelButtonLabel"),cancelButtonAction:w,primaryButtonContent:c("settings.organization.organizationLogo.removeLogoConfirmationModalRemoveButtonLabel"),primaryButtonAction:j},"removeLogoModal")]})},ur=()=>{const{t:e}=(0,b.$G)();return(0,P.jsx)(zi,{heading:e("settings.organization.logo.heading"),text:e("settings.organization.featurecallout.text.logo")})},gr=e=>{let{org:t}=e;const{t:n}=(0,b.$G)(),o=!(null===t||void 0===t||!t.showTomeBranding),[r]=(0,d.pFu)(),s=(0,i.useCallback)((()=>{t.id&&r({variables:{orgId:t.id,showTomeBrandingPreference:!o},update:e=>{e.modify({id:e.identify(t),fields:{showTomeBranding:()=>!o}})},optimisticResponse:{updateOrganization:{__typename:"Organization",id:t.id,name:t.name,slug:t.slug,logo:t.logo,showTomeBranding:!o}}})}),[t,o,r]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ki,{children:n("settings.organization.branding.heading")}),(0,P.jsxs)(wi,{children:[(0,P.jsx)(or.Z,{id:"toggle_tome_branding","data-testid":"toggle_tome_branding",height:14,width:14,checked:o,onClick:s}),(0,P.jsx)(ji,{htmlFor:"toggle_tome_branding",children:n("settings.organization.branding.checkboxLabel")})]})]})},mr=()=>{const{t:e}=(0,b.$G)();return(0,P.jsx)(zi,{heading:e("settings.organization.branding.heading"),text:e("settings.organization.featurecallout.text.branding")})};var hr=e=>{var t;let{org:n,isAdmin:o,baseFrontendUrl:r}=e;const{0:s,1:a}=(0,i.useState)(n.name),{0:l,1:c}=(0,i.useState)(n.slug),[p,{loading:u}]=(0,d.pFu)(),{priceType:g}=(0,D.Z)(),{t:m}=(0,b.$G)(),{0:h,1:f}=(0,i.useState)(!1),[x,{data:v,error:y}]=(0,d.zlY)({fetchPolicy:"no-cache"}),w=s.length>0,j=s!==n.name;(0,i.useEffect)((()=>{var e;(void 0!==(null===v||void 0===v||null===(e=v.slug)||void 0===e?void 0:e.slug)||y)&&f(!1)}),[v,u,y]);const C=(0,i.useMemo)((()=>(0,Yi.Z)((async e=>{x({variables:{orgName:e}})}),750)),[x]);(0,i.useEffect)((()=>{var e,t;null!==v&&void 0!==v&&null!==(e=v.slug)&&void 0!==e&&e.slug&&c(j?null===v||void 0===v||null===(t=v.slug)||void 0===t?void 0:t.slug:n.slug)}),[null===v||void 0===v||null===(t=v.slug)||void 0===t?void 0:t.slug,j,n.slug]);const _=`${r}/${l}`,O=(0,i.useCallback)((e=>{const t=e.target.value;a(t),t&&(f(!0),C(t))}),[C]),I=(0,i.useCallback)((async e=>{if(e.preventDefault(),!u&&w&&n.id)try{await p({variables:{orgId:n.id,name:s,slug:l}})}catch{(0,M.Sd)({message:m("settings.organization.organizationSettings.errors.errorOccurredTryAgainLaterToastMessage")})}}),[u,w,n.id,l,s,p,m]);return(0,P.jsxs)(no,{onSubmit:I,children:[(0,P.jsx)(Vn,{children:n.name}),(0,P.jsxs)(oo,{children:[(0,P.jsxs)(Jn,{children:[m("settings.organization.organizationSettings.workspaceNameLabel"),(0,P.jsxs)(eo,{children:[(0,P.jsx)(Xn,{type:"text",id:"org-name",name:"org-name",value:s,onChange:O,disabled:!o}),(0,P.jsx)(Yn,{type:"submit",disabled:h||!w||!j||u,children:m("settings.organization.organizationSettings.updateButtonLabel")})]})]}),(0,P.jsxs)(Jn,{children:[m("settings.organization.organizationSettings.workspaceURLLabel"),(0,P.jsx)(Xn,{type:"text",id:"slug",name:"slug",disabled:!0,value:_})]}),g&&(0,P.jsx)(pr,{org:n})||(0,P.jsx)(ur,{}),g&&(0,P.jsx)(gr,{org:n})||(0,P.jsx)(mr,{})]})]})},fr=n(46075);const br=f.ZP.div.withConfig({displayName:"Plansstyles__PlansContainer",componentId:"sc-1f7qq2w-0"})(["display:flex;gap:16px;padding-bottom:32px;"]),xr=f.ZP.h3.withConfig({displayName:"Plansstyles__Header",componentId:"sc-1f7qq2w-1"})(["margin:0;font-size:",";color:",";font-weight:600;"],(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.colors.plansSectionHeaderText})),vr=f.ZP.div.withConfig({displayName:"Plansstyles__PricingContainer",componentId:"sc-1f7qq2w-2"})(["display:flex;flex-direction:column;gap:6px;margin-bottom:12px;"]),yr=(0,f.iv)(["font-size:11px;line-height:13px;"]),wr=(0,f.ZP)(G.Z).withConfig({displayName:"Plansstyles__PlansButton",componentId:"sc-1f7qq2w-3"})(["width:100%;font-size:",";",""],(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{disabled:t,variant:n}=e;return"text"===n&&t&&(0,f.iv)(["outline:1px solid rgba(255,255,255,0.12);"])})),jr=f.ZP.div.withConfig({displayName:"Plansstyles__ToggleContainer",componentId:"sc-1f7qq2w-4"})([""," width:100%;display:flex;gap:8px;align-items:center;justify-content:end;padding-bottom:16px;color:",";"],yr,(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText})),Cr=f.ZP.div.withConfig({displayName:"Plansstyles__TitleContainer",componentId:"sc-1f7qq2w-5"})(["display:flex;align-items:baseline;"]),Pr=f.ZP.div.withConfig({displayName:"Plansstyles__FeatureHeading",componentId:"sc-1f7qq2w-6"})(["font-weight:600;padding-bottom:12px;color:",";"],(e=>{let{theme:t}=e;return t.colors.plansSectionHeaderText})),_r=f.ZP.div.withConfig({displayName:"Plansstyles__Feature",componentId:"sc-1f7qq2w-7"})(["font-weight:400;display:flex;align-items:flex-start;> *{flex:none;}","{fill:",";margin-right:6px;width:14px;height:14px;transform:translateY(-1px);}"],A.K,(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText})),Or=f.ZP.div.withConfig({displayName:"Plansstyles__FeatureGroup",componentId:"sc-1f7qq2w-8"})(["font-size:11px;padding-top:4px;& ",":not(:last-child){padding-bottom:6px;}"],_r),Ir=f.ZP.div.withConfig({displayName:"Plansstyles__FeatureGroupExpandLabel",componentId:"sc-1f7qq2w-9"})(["color:",";position:relative;&:hover{color:",";cursor:pointer;","{fill:",";}}","{fill:",";position:absolute;width:13px;height:13px;}"],(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabel}),(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabelHover}),A.K,(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabelHover}),A.K,(e=>{let{theme:t}=e;return t.colors.plansSectionExpandLabel})),Tr=f.ZP.div.withConfig({displayName:"Plansstyles__Plan",componentId:"sc-1f7qq2w-10"})(["width:207px;padding:16px;border-radius:16px;background:",";color:",";"," > h3{margin-bottom:12px;}> button,a{margin-bottom:20px;}& ",":not(:last-child){margin-bottom:12px;}"],(e=>{let{theme:t}=e;return t.colors.plansSectionBackground}),(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText}),q.qc,Or),kr=f.ZP.div.withConfig({displayName:"Plansstyles__DowngradeModalContent",componentId:"sc-1f7qq2w-11"})(["padding-top:12px;padding-bottom:4px;color:",";",""],(e=>{let{theme:t}=e;return t.colors.plansSectionBodyText}),q.qc),Sr=(0,f.ZP)(Qt.T).attrs((e=>{let{theme:t}=e;return{backgroundColor:t.colors.loadingBackground,foregroundColor:t.colors.loadingForeground}})).withConfig({displayName:"Plansstyles__Loading",componentId:"sc-1f7qq2w-12"})([""]),Zr=f.ZP.div.withConfig({displayName:"Pricing__Price",componentId:"vwrycz-0"})(["font-weight:600;font-size:28px;color:",";"],(e=>{let{theme:t}=e;return t.colors.plansSectionHeaderText})),Er=f.ZP.div.withConfig({displayName:"Pricing__Period",componentId:"vwrycz-1"})([""," white-space:pre;"],yr);var Nr=e=>{let{freePlan:t,priceType:n}=e;const{t:o}=(0,b.$G)();let i=0,r="";switch(n){case d.FTz.ProMonthly:i=10,r=o("settings.plans.proPeriodMonthly");break;case d.FTz.ProAnnually:i=8,r=o("settings.plans.proPeriodAnnually")}return t&&(i=0,r=o("settings.plans.freePeriod")),(0,P.jsxs)(vr,{children:[(0,P.jsx)(Zr,{children:o("intlCurrencyWithOptionsSimplified",{val:i,notation:"compact",compactDisplay:"short"})}),(0,P.jsx)(Er,{children:r})]})},Mr=n(24581);var Lr=(0,i.forwardRef)(((e,t)=>{let{children:n}=e;const{t:o}=(0,b.$G)(),{apolloClient:r}=(0,m.bp)(),[s]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.Cancel},onError:e=>{(0,M.Sd)({message:e.message})}}),a=(0,co.s)(),{0:l,1:c}=(0,i.useState)(!1);(0,i.useImperativeHandle)(t,(()=>({open:a.open,close:a.close})));return(0,P.jsxs)(co.Z,{ref:a.ref,title:o("settings.plans.downgrade.modalTitle"),subtitle:o("settings.plans.downgrade.modalContent"),primaryButtonContent:l?(0,P.jsx)(Sr,{size:16}):o("settings.plans.downgrade.buttonTitle"),primaryButtonAction:()=>{N.ZP.reportPaymentEvent({apolloClient:r,trackEventType:N.nM.CLICK_DOWNGRADE_SUBMIT}),(async()=>{var e;c(!0);const{data:t}=await s(),n=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;n?window.location.assign(n):c(!1)})()},cancelButtonText:o("cancel"),cancelButtonAction:()=>{N.ZP.reportPaymentEvent({apolloClient:r,trackEventType:N.nM.CLICK_DOWNGRADE_CANCEL}),a.close()},buttonColor:"destructive",dismissible:!0,children:[(0,P.jsx)(kr,{children:(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:o("settings.plans.downgrade.features.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(Mr.Z,{}),o("settings.plans.downgrade.features.unlimitedCreation")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(Mr.Z,{}),o("settings.plans.downgrade.features.aiCredits")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(Mr.Z,{}),o("settings.plans.downgrade.features.exportToPDF")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(Mr.Z,{}),o("settings.plans.downgrade.features.customLogos")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(Mr.Z,{}),o("settings.plans.downgrade.features.tomeBranding")]})]})}),n]})})),Dr=n(75802);var Rr=e=>{let{heading:t,features:n,limit:o}=e;const{t:r}=(0,b.$G)(),{0:s,1:a}=(0,i.useState)((()=>n.length<=o)),l=s?n.length:o;return(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:t}),n.slice(0,l).map((e=>(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),e]},e))),!s&&(0,P.jsxs)(Ir,{onClick:()=>a(!0),children:[r("settings.plans.features.moreButtonLabel",{count:n.length-l}),(0,P.jsx)(Dr.Z,{})]})]})};function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ar=(0,i.forwardRef)(((e,t)=>(0,P.jsxs)(A.Z,zr(zr({ref:t,viewBox:"0 0 64 64"},e),{},{children:[(0,P.jsx)("path",{d:"M19 26C19 24.8954 19.8954 24 21 24H43C44.1046 24 45 24.8954 45 26C45 27.1046 44.1046 28 43 28H21C19.8954 28 19 27.1046 19 26Z"}),(0,P.jsx)("path",{d:"M21 32C19.8954 32 19 32.8954 19 34C19 35.1046 19.8954 36 21 36H37C38.1046 36 39 35.1046 39 34C39 32.8954 38.1046 32 37 32H21Z"}),(0,P.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 22V38.4706C10 42.629 13.371 46 17.5294 46C17.7893 46 18 46.2107 18 46.4706V51.7299C18 53.4256 19.9777 54.3519 21.2804 53.2664L29.4437 46.4636C29.8032 46.164 30.2562 46 30.7241 46H46C50.4183 46 54 42.4183 54 38V22C54 17.5817 50.4183 14 46 14H18C13.5817 14 10 17.5817 10 22ZM14 22V38C14 40.2091 15.7909 42 18 42H21C21.5523 42 22 42.4477 22 43V46.9129C22 47.3401 22.5011 47.5705 22.8254 47.2925L28.4383 42.4815C28.8008 42.1708 29.2624 42 29.7398 42H46C48.2091 42 50 40.2091 50 38V22C50 19.7909 48.2091 18 46 18H18C15.7909 18 14 19.7909 14 22Z"})]}))));const Fr=f.ZP.div.withConfig({displayName:"ContactUs__IconContainer",componentId:"bwrsj3-0"})(["height:34px;& svg{height:100%;fill:",";}"],(e=>e.theme.colors.workspaceEnterprisePlanIcon)),Hr=f.ZP.div.withConfig({displayName:"ContactUs__ContactUsLabel",componentId:"bwrsj3-1"})([""," height:26px;"],yr);var Ur=()=>{const{t:e}=(0,b.$G)();return(0,P.jsxs)(vr,{children:[(0,P.jsx)(Fr,{children:(0,P.jsx)(Ar,{})}),(0,P.jsx)(Hr,{children:e("settings.plans.contactForPricing")})]})};const $r="PlanTypeToggle";var Gr;!function(e){e.ACTIVE_SUBSCRIPTION_EXISTS="ACTIVE_SUBSCRIPTION_EXISTS"}(Gr||(Gr={}));var Wr=()=>{const{priceType:e,isPendingCancellation:t,refetchOrgPaymentsQuery:n}=(0,D.Z)(),{0:o,1:r}=(0,i.useState)(e??d.FTz.ProAnnually),{t:s}=(0,b.$G)(),{apolloClient:a}=(0,m.bp)(),l=(0,i.useRef)(),{0:c,1:p}=(0,i.useState)(!1),u=e=>{(0,M.Sd)({message:e})},[g]=(0,d.xN_)({onError:async e=>{if(e.graphQLErrors.map((e=>{var t;return null===(t=e.extensions)||void 0===t?void 0:t.code})).filter((e=>!!e)).find((e=>e===Gr.ACTIVE_SUBSCRIPTION_EXISTS))){var t,o;const e=await n();null!==e&&void 0!==e&&null!==(t=e.data.me)&&void 0!==t&&null!==(o=t.org)&&void 0!==o&&o.priceType||u(s("settings.plans.APIErrors.ACTIVE_SUBSCRIPTION_EXISTS"))}else u(s("settings.plans.APIErrors.genericPlanFetchErrorMessage"))}});(0,i.useEffect)((()=>{const e=setTimeout(n,1e3);return()=>clearTimeout(e)}),[]);const[h]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.Default},onError:e=>{(0,M.Sd)({message:e.message})}}),f=!!e,x=f?t?{enabled:!1,label:s("settings.plans.nextPlan")}:{enabled:!0,label:s("settings.plans.downgrade.buttonTitle")}:{enabled:!1,label:s("settings.plans.current")},v=(()=>{if(!f)return{enabled:!0,label:s("settings.plans.upgrade")};if(t)return{enabled:!1,label:s("settings.plans.endingSoon")};if(e===o)return{enabled:!1,label:s("settings.plans.current")};return{enabled:!0,label:s("settings.plans.change",{interval:o===d.FTz.ProAnnually?s("settings.plans.yearlyLower"):s("settings.plans.monthlyLower")})}})();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(Cr,{children:[(0,P.jsx)(Vn,{children:s("settings.plans.plans")}),(0,P.jsxs)(jr,{children:[(0,P.jsx)("label",{htmlFor:$r,children:s("settings.plans.yearly")}),(0,P.jsx)(fr.Z,{inputId:$r,width:"24px",height:"12px",onClick:()=>{r((e=>e===d.FTz.ProMonthly?d.FTz.ProAnnually:d.FTz.ProMonthly))},onBgColor:!0,radius:4,checked:o===d.FTz.ProMonthly}),(0,P.jsx)("label",{htmlFor:$r,children:s("settings.plans.monthly")})]})]}),(0,P.jsxs)(br,{children:[(0,P.jsxs)(Tr,{children:[(0,P.jsx)(xr,{children:s("settings.plans.free")}),(0,P.jsx)(Nr,{priceType:o,freePlan:!0}),(0,P.jsx)(wr,{variant:x.enabled?"contained":"text",onClick:()=>{var e;null===(e=l.current)||void 0===e||e.open(),N.ZP.reportPaymentEvent({apolloClient:a,trackEventType:N.nM.CLICK_DOWNGRADE_BUTTON})},disabled:!x.enabled,"data-testid":"free_plan_button",children:x.label}),(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:s("settings.plans.features.tomeCreation.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForIndividuals")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.tomeCreation.limitedForWorkspaces")]})]}),(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:s("settings.plans.features.aiCompute.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.aiCompute.limited")]})]})]}),(0,P.jsxs)(Tr,{children:[(0,P.jsx)(xr,{children:s("settings.plans.pro")}),(0,P.jsx)(Nr,{priceType:o,freePlan:!1}),(0,P.jsx)(wr,{color:v.enabled?"primary":"default",variant:v.enabled?"contained":"text",onClick:async e=>{e.detail>1||(p(!0),f?await(async()=>{var e;const{data:t}=await h(),n=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;n&&window.location.assign(n)})():await(async()=>{var e;const{data:t}=await g({variables:{priceType:o}});N.ZP.reportPaymentEvent({apolloClient:a,trackEventType:N.nM.CLICK_PLANS_PURCHASE_BUTTON,properties:{priceType:o}});const n=null===t||void 0===t||null===(e=t.createStripeCheckoutSession)||void 0===e?void 0:e.checkoutUrl;n&&window.location.assign(n)})(),p(!1))},disabled:!v.enabled,"data-testid":"pro_plan_button",children:c?(0,P.jsx)(Sr,{size:16}):v.label}),(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:s("settings.plans.features.tomeCreation.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForIndividuals")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForWorkspaces")]})]}),(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:s("settings.plans.features.aiCompute.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.aiCompute.unlimitedForIndividuals")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.aiCompute.unlimitedForWorkspaces")]})]}),(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:s("settings.plans.features.everythingFreePlus.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.everythingFreePlus.exportToPDF")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.everythingFreePlus.branding")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.everythingFreePlus.customLogo")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.everythingFreePlus.support")]})]})]}),(0,P.jsxs)(Tr,{children:[(0,P.jsx)(xr,{children:s("settings.plans.enterprise")}),(0,P.jsx)(Ur,{}),(0,P.jsx)(wr,{component:"a",href:"mailto:enterprise@tome.page","data-testid":"enterprise_plan_button",children:s("settings.plans.contactUs")}),(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:s("settings.plans.features.tomeCreation.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForIndividuals")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.tomeCreation.unlimitedForWorkspaces")]})]}),(0,P.jsxs)(Or,{children:[(0,P.jsx)(Pr,{children:s("settings.plans.features.aiCompute.heading")}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.aiCompute.unlimitedForIndividuals")]}),(0,P.jsxs)(_r,{children:[(0,P.jsx)(ut.Z,{}),s("settings.plans.features.aiCompute.unlimitedForWorkspaces")]})]}),(0,P.jsx)(Rr,{heading:s("settings.plans.features.everythingProPlus.heading"),limit:3,features:[s("settings.plans.features.everythingProPlus.customTiles"),s("settings.plans.features.everythingProPlus.whiteGlove"),s("settings.plans.features.everythingProPlus.dedicated"),s("settings.plans.features.everythingProPlus.templates"),s("settings.plans.features.everythingProPlus.customFonts"),s("settings.plans.features.everythingProPlus.customSubDomains"),s("settings.plans.features.everythingProPlus.analytics"),s("settings.plans.features.everythingProPlus.sso")]})]})]}),(0,P.jsx)(Lr,{ref:l})]})},qr=n(67171);const Vr=f.ZP.div.withConfig({displayName:"Billing__BillingContainer",componentId:"sc-1avoa3t-0"})(["display:flex;flex-direction:column;height:100%;position:relative;"]),Kr=f.ZP.div.withConfig({displayName:"Billing__BillingContent",componentId:"sc-1avoa3t-1"})(["display:flex;flex-grow:1;flex-direction:column;align-items:center;justify-content:center;gap:16px;position:absolute;width:100%;height:100%;"]),Qr=f.ZP.span.withConfig({displayName:"Billing__SpinnerLabel",componentId:"sc-1avoa3t-2"})(["font-size:",";line-height:16px;color:",";"],(e=>{let{theme:t}=e;return t.fontSizes.sm}),(e=>{let{theme:t}=e;return t.colors.fieldLabel})),Jr=()=>{const e=(0,f.Fg)();return(0,P.jsx)(qr.Z,{size:28,stroke:2,rotationDuration:1,background:e.colors.billingSettingsSpinnerBackground,foreground:e.colors.billingSettingsSpinnerForeground})};var Xr=()=>(0,P.jsxs)(Vr,{children:[(0,P.jsx)(Vn,{children:io.ZP.t("settings.tab.billing")}),(0,P.jsxs)(Kr,{children:[(0,P.jsx)(Jr,{}),(0,P.jsx)(Qr,{children:io.ZP.t("settings.label.stripeRedirect")})]})]});var Yr;!function(e){e.STRIPE_SESSION_IS_MISSING_URL="STRIPE_SESSION_IS_MISSING_URL"}(Yr||(Yr={}));const es=(0,f.ZP)(jt.Z).withConfig({displayName:"Settings__StyledBuilding",componentId:"hlqhwl-0"})(["margin-left:5px;"]);var ts=i.forwardRef(((e,t)=>{var n;let{baseFrontendUrl:o}=e;const{user:r,loading:s,activeMembership:a}=(0,i.useContext)(k.Z),{selectedSettingsTab:l,settingsChanged:c}=(0,oe.r)(),{priceType:p}=(0,D.Z)(),{apolloClient:u}=(0,m.bp)(),{t:g}=(0,b.$G)(),[h]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.Default},onError:e=>{const t=e.graphQLErrors.map((e=>{var t;return null===(t=e.extensions)||void 0===t?void 0:t.code})).filter((e=>!!e));let n=g("settings.plans.APIErrors.genericCustomerPortalSessionFetchErrorMessage");t.find((e=>e===Yr.STRIPE_SESSION_IS_MISSING_URL))&&(n=g("settings.plans.APIErrors.STRIPE_SESSION_IS_MISSING_URL")),(0,M.Sd)({message:n})}});if(!r||s)return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(I.ZA,{}),(0,P.jsx)(I.hz,{width:883,height:532,ref:t})]});const f=(null===a||void 0===a?void 0:a.role)===d.nJN.Admin;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(I.ZA,{}),(0,P.jsx)(I.hz,{width:883,height:532,ref:t,"data-testid":"settings_modal",children:(0,P.jsxs)(zn,{value:l,onValueChange:e=>{const t=(0,oe.C)(e);t&&(c(t,t!==ie.u.BILLING),t===ie.u.PLANS&&N.ZP.reportPaymentEvent({apolloClient:u,trackEventType:N.nM.CLICK_PLAN_TAB}),t===ie.u.BILLING&&((async()=>{var e;const{data:t}=await h(),n=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;n&&window.location.assign(n)})(),N.ZP.reportPaymentEvent({apolloClient:u,trackEventType:N.nM.CLICK_BILLING_TAB})))},children:[(0,P.jsxs)(An,{children:[(0,P.jsxs)(Fn,{children:[(0,P.jsx)(Hn,{children:g("settings.tab.me")}),(0,P.jsx)(Fn,{children:(0,P.jsxs)(Un,{value:ie.u.ME,"data-testid":"my_account_tab",children:[!s&&r&&(0,P.jsx)($n,{size:20,user:r}),(0,P.jsx)(Gn,{children:!s&&(null===r||void 0===r?void 0:r.name)})]})})]}),(0,P.jsxs)(Fn,{children:[(0,P.jsx)(Hn,{children:g("settings.tab.team")}),(0,P.jsxs)(Fn,{children:[(0,P.jsxs)(Un,{value:ie.u.ORGANIZATION,"data-testid":"organization_tab",children:[(0,P.jsx)(es,{}),(0,P.jsx)(Gn,{children:null===a||void 0===a||null===(n=a.org)||void 0===n?void 0:n.name})]}),(0,P.jsxs)(Un,{value:ie.u.MEMBERS,"data-testid":"members_tab",children:[(0,P.jsx)(Tt,{}),(0,P.jsx)(Gn,{children:g("settings.tab.members")})]}),(0,P.jsxs)(Un,{value:ie.u.PLANS,"data-testid":"plan_tab",children:[(0,P.jsx)(ne,{}),(0,P.jsx)(Gn,{children:g("settings.tab.plans")})]}),p&&(0,P.jsxs)(Un,{value:ie.u.BILLING,"data-testid":"billing_tab",children:[(0,P.jsx)(Ln,{}),(0,P.jsx)(Gn,{children:g("settings.tab.billing")}),(0,P.jsx)(Dn.Z,{style:{marginLeft:4,width:16,height:16}})]})]})]})]}),(0,P.jsxs)(Wn,{children:[(0,P.jsx)(qn,{value:ie.u.ME,children:(0,P.jsx)(Xi,{user:r})}),(0,P.jsx)(qn,{value:ie.u.MEMBERS,children:(0,P.jsx)($i,{})}),(0,P.jsx)(qn,{value:ie.u.PLANS,children:(0,P.jsx)(Wr,{})}),(null===a||void 0===a?void 0:a.org)&&(0,P.jsx)(qn,{value:ie.u.ORGANIZATION,children:(0,P.jsx)(hr,{org:a.org,isAdmin:f,baseFrontendUrl:o})}),p&&(0,P.jsx)(qn,{value:ie.u.BILLING,children:(0,P.jsx)(Xr,{})})]})]})})]})}));function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var is=function(e){var t;const{0:n,1:o}=(0,i.useState)(!1),{data:r}=(0,d.tEA)(),s=(null===r||void 0===r||null===(t=r.me)||void 0===t?void 0:t.unreadNotificationCount)??0;return(0,d.xau)({skip:!e,variables:{userId:e},onData(e){var t;let{client:{cache:n},data:i}=e;const s=null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.notification;s&&null!==r&&void 0!==r&&r.me&&(n.modify({id:n.identify(r.me),fields:{notifications:e=>os(os({},e),{},{nodes:[s,...e.nodes]})}}),o(!0))}}),{hasUnreadNotifications:s>0||n,clearNotificationStatus:(0,i.useCallback)((()=>{o(!1)}),[])}},rs=n(64487);const ss=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileStyles",componentId:"sc-13421wt-0"})(["display:flex;flex-direction:row;align-items:center;"]),as=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileNameLabel",componentId:"sc-13421wt-1"})(["margin-left:","px;display:flex;flex-direction:column;align-items:flex-start;flex:1;overflow:hidden;"],(e=>e.theme.iconSize/2)),ls=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileName",componentId:"sc-13421wt-2"})(["font-size:",";font-weight:600;line-height:18px;width:100%;"," ",""],(e=>e.theme.fontSizes.smmd),q.wR,(e=>{let{$loading:t,theme:n}=e;return t&&(0,f.iv)(["width:63px;height:12px;border-radius:4px;margin-bottom:6px;background-color:",";"],n.colors.contrast16)})),ds=f.ZP.div.withConfig({displayName:"WorkspaceOwnProfile__ProfileEmail",componentId:"sc-13421wt-3"})(["margin-top:1px;font-size:",";line-height:13px;color:",";width:100%;"," ",""],(e=>e.theme.fontSizes.xxs),(e=>e.theme.colors.contrast40),q.wR,(e=>e.$loading&&(0,f.iv)(["width:118px;height:12px;margin-top:2px;border-radius:4px;background-color:",";"],e.theme.colors.contrast8)));var cs=e=>{let{user:t,loading:n}=e;return(0,P.jsxs)(ss,{children:[(0,P.jsx)(en.Z,{size:24,user:t||{}}),(0,P.jsxs)(as,{children:[(0,P.jsx)(ls,{"data-testid":"profile_name",$loading:n,children:null===t||void 0===t?void 0:t.name}),(0,P.jsx)(ds,{$loading:n,children:null===t||void 0===t?void 0:t.email})]}),(0,P.jsx)(Vo,{})]})};const ps=(0,f.ZP)(Qe.nx).withConfig({displayName:"ProfileMenu__ProfileSidebarItem",componentId:"sc-1rl12ck-0"})(["padding-top:5px;padding-bottom:5px;"]);var us=e=>{let{loading:t,openSettings:n,setIsQRCodeOpen:r,user:s}=e;const{0:a,1:l}=(0,i.useState)(!1),{activeMembership:d,flags:c}=(0,i.useContext)(k.Z),{t:p}=(0,b.$G)(),u=(0,i.useCallback)((()=>{r(!0)}),[r]),g=()=>{window.open(`https://slack.com/oauth/authorize?scope=bot&client_id=1643590093635.1981156424149&state=${null===s||void 0===s?void 0:s.id}`,"_blank")},m=[];return null!==d&&void 0!==d&&d.org&&m.push({text:p("profileMenuSectionLabel.settings"),action:n}),null!==c&&void 0!==c&&c.slackbot&&m.push({text:p("profileMenuSectionLabel.addToSlack"),action:g}),m.push({text:p("profileMenuSectionLabel.logOut"),action:()=>{o.v.removeUser(),rs.e((e=>e.setUser(null))),window.location.href="/logout"}}),m.push({type:"separator"}),m.push({text:p("profileMenuSectionLabel.tomeForIOS"),action:u}),(0,P.jsx)(we.Z,{menuWidth:200,disabled:t,menuPosition:"below",menuAlign:"right",additionalSpacing:-2,setOpenState:l,itemsOrFn:m,children:(0,P.jsx)(ps,{$selected:a,children:(0,P.jsx)(cs,{user:s,loading:t})})})};var gs=e=>{let{isNotificationOpen:t,setIsNotificationOpen:n,setIsQRCodeOpen:o,notificationMenuRef:r,tabs:a,selectedTab:d,openSettings:c}=e;const{user:p,activeMembership:u,loading:g}=(0,i.useContext)(k.Z),{hasUnreadNotifications:m,clearNotificationStatus:h}=is(null===p||void 0===p?void 0:p.id),f=(0,s.useRouter)(),x=(0,i.useCallback)((()=>{g||(n(!t),h())}),[n,h,t,g]),{t:v}=(0,b.$G)(),{priceType:y}=(0,D.Z)();return(0,P.jsxs)(Qe.HX,{suppressHydrationWarning:!0,onClick:()=>{t&&n(!1)},children:[(0,P.jsxs)(Qe.pC,{children:[(0,P.jsx)(us,{loading:g,openSettings:c,setIsQRCodeOpen:o,user:p}),(0,P.jsx)(Qe.nx,{onClick:x,$loading:g,"data-testid":g?null:"workspace_sidebar_notification",children:(0,P.jsxs)(Qe.U4,{ref:r,children:[(0,P.jsx)(Bt,{id:"notifications",type:"workspace-bell",badge:m,selected:t,loading:g}),(0,P.jsx)(Qe.$o,{selected:t,$loading:g,children:g?null:v("workspace.sidebarTabLabel.notifications")})]})}),a.map((e=>(0,P.jsx)(Qe.nx,{onMouseDown:()=>g?null:(0,l.MT)(f,e.id),"data-testid":g?null:`workspace_sidebar_${e.id}`,$loading:g,children:(0,P.jsxs)(Qe.U4,{children:[(0,P.jsx)(Bt,{id:e.id,type:e.icon,selected:!t&&e.id===d,loading:g}),(0,P.jsx)(Qe.$o,{selected:!t&&e.id===d,$loading:g,children:g?null:e.text})]})},e.id))),!(null===u||void 0===u||!u.org)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Qe.tm,{}),(0,P.jsx)(Qe.nx,{onMouseDown:()=>g?null:c(),$loading:g,children:(0,P.jsxs)(Qe.U4,{children:[(0,P.jsx)(Bt,{id:"invite",type:"workspace-invite",selected:!t&&"invite"===d,loading:g}),(0,P.jsx)(Qe.$o,{selected:!t&&"invite"===d,$loading:g,children:g?null:v("workspace.sidebarTabLabel.invite")})]})})]})]}),(0,P.jsx)(Qe.Q3,{children:!y&&(0,P.jsx)(S.Cm,{})})]})},ms=n(50222);const hs=(0,f.iv)(["color:",";"],(e=>{let{theme:t,$warning:n}=e;return n?t.colors.workspaceBannerWarningLabel:t.colors.workspaceBannerLabel})),fs=f.ZP.div.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerStyles",componentId:"rvmdac-0"})(["display:flex;align-items:center;justify-content:center;flex-shrink:0;height:48px;gap:12px;border-bottom:",";box-sizing:border-box;font-size:",";",""],(e=>{let{theme:t}=e;return`1px solid ${t.colors.workspaceBannerBorder}`}),(e=>{let{theme:t}=e;return t.fontSizes.sm}),hs),bs=f.ZP.span.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerMessage",componentId:"rvmdac-1"})([""]),xs=(0,f.ZP)(G.Z).withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButton",componentId:"rvmdac-2"})(["padding:0 8px;height:32px;"," > span{border-radius:",";","}"],q.qc,(e=>{let{theme:t}=e;return t.borderRadius.xs}),hs),vs=(0,f.ZP)(Qt.T).attrs((e=>{let{theme:t}=e;return{backgroundColor:t.colors.loadingBackground,foregroundColor:t.colors.loadingForeground}})).withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButtonLoadingSpinner",componentId:"rvmdac-3"})([""]),ys=f.ZP.span.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButtonLabel",componentId:"rvmdac-4"})([""]),ws=f.ZP.div.withConfig({displayName:"WorkspaceBannerstyles__WorkspaceBannerButtonContainer",componentId:"rvmdac-5"})(["position:relative;display:flex;align-items:center;justify-content:center;& > ","{opacity:",";}& > ","{position:absolute;opacity:",";}"],ys,(e=>{let{$loading:t}=e;return t?0:1}),vs,(e=>{let{$loading:t}=e;return t?1:0}));var js=e=>{let{message:t,buttonLabel:n,buttonAriaLabel:o,buttonOnClick:i,buttonLoading:r=!1,warning:s=!1,testId:a}=e;const l=(0,f.Fg)();return(0,P.jsxs)(fs,{$warning:s,"data-testid":a,children:[(0,P.jsx)(bs,{children:t}),(0,P.jsx)(xs,{$warning:s,opacity:1,onZ0:!s,customButtonPalette:s?{default:l.colors.workspaceBannerButtonWarning}:void 0,onClick:i,"aria-label":o,"data-testid":a?`${a}_button`:void 0,children:(0,P.jsxs)(ws,{$loading:r,children:[r&&(0,P.jsx)(vs,{size:16}),(0,P.jsx)(ys,{children:n})]})})]})};var Cs=e=>{let{remainingTomeCreationsForOrg:t}=e;const{t:n}=(0,b.$G)(),{apolloClient:o}=(0,m.bp)(),i=t<=ms.V0,{openSettings:r}=(0,oe.r)();if(!i)return null;const s=0===t;let a;a=s?n("workspace.upgradeBanner.message_limit_reached"):n(1===t?"workspace.upgradeBanner.message_with_count_one":"workspace.upgradeBanner.message_with_count_other",{count:t});return(0,P.jsx)(js,{message:a,buttonLabel:n("workspace.upgradeBanner.buttonLabel"),buttonAriaLabel:n("workspace.upgradeBanner.buttonAriaLabel"),buttonOnClick:()=>{r(ie.u.PLANS),N.ZP.reportPaymentEvent({apolloClient:o,trackEventType:N.nM.CLICK_LIMITED_TOMES_UPGRADE_BUTTON})},warning:s,testId:"upgrade_banner"})};var Ps=()=>{var e;const{t:t}=(0,b.$G)(),{apolloClient:n}=(0,m.bp)(),{activeMembership:o}=(0,i.useContext)(k.Z),r=(null===o||void 0===o||null===(e=o.org)||void 0===e?void 0:e.slug)??"/",[s]=(0,d.faM)({variables:{customerPortalSessionType:d.ZI.UpdatePaymentMethod,returnPath:r},onError:e=>{(0,M.Sd)({message:e.message})}}),{0:a,1:l}=(0,i.useState)(!1);return(0,P.jsx)(js,{message:t("workspace.upgradeBanner.messagePastDue"),buttonLabel:t("workspace.upgradeBanner.buttonPastDueLabel"),buttonAriaLabel:t("workspace.upgradeBanner.buttonPastDueAriaLabel"),buttonOnClick:async()=>{var e;l(!0);const{data:t}=await s(),o=null===t||void 0===t||null===(e=t.createStripeCustomerPortalSession)||void 0===e?void 0:e.customerPortalUrl;o?window.location.assign(o):l(!1),N.ZP.reportPaymentEvent({apolloClient:n,trackEventType:N.nM.CLICK_WORKSPACE_UPDATE_PAYMENT_BUTTON})},buttonLoading:a,warning:!0,testId:"past_due_banner"})};let _s;!function(e){e.RECENT="recent",e.CREATED="created",e.ORG="org",e.SHARED="shared",e.DELETED="deleted"}(_s||(_s={}));const Os="org",Is=l.Gz;function Ts(e){e.preventDefault()}var ks=e=>{var t,n,r;let{isMobile:a,initialSelectedTab:l}=e;o.v.startView("workspace");const c=(0,Z.Z)(),p=a??c,g=(0,f.Fg)(),{apolloClient:y,clientId:w,setWorkspaceUrl:j}=(0,m.bp)(),C=(0,s.useRouter)(),{data:R,loading:B}=(0,d._HF)(),z=C.query.referralStatus,{0:A,1:F}=(0,i.useState)(!1);(0,i.useEffect)((()=>{"false"===z&&(N.ZP.reportRedeemedReferralCodeWithExistingAccount({apolloClient:y}),F(!0))}),[z,y]);const H=(0,i.useMemo)((()=>{var e;if(!B)return(null===R||void 0===R||null===(e=R.me)||void 0===e?void 0:e.numSharedWithMeTomes)||0}),[R,B]),{isSettingsOpen:U,openSettings:$,closeSettings:G}=(0,oe.r)(),W=(0,i.useCallback)((e=>{e?($(),N.ZP.reportPaymentEvent({apolloClient:y,trackEventType:N.nM.CLICK_OPEN_SETTINGS})):G()}),[y,G,$]),{0:q,1:V}=(0,i.useState)(!1),K=(0,i.useRef)(null),{0:Q,1:J}=(0,i.useState)(!1),{0:X,1:Y}=(0,i.useState)(!0),{t:ee}=(0,b.$G)(),te=(0,h.useSpring)({opacity:Q?"1.0":"0.0",scale:Q?"1.0":"0.95",visibility:!X||Q?"visible":"hidden",config:{duration:100}});(0,i.useEffect)((()=>("undefined"!==typeof document&&document.addEventListener("contextmenu",Ts),()=>{document.removeEventListener("contextmenu",Ts)})),[]),(0,i.useEffect)((()=>{Y(!1);const e=setTimeout((()=>Y(!0)),100);return()=>{clearTimeout(e)}}),[Q]);const ne=(0,i.useCallback)((()=>l||(window&&window.localStorage.getItem("workspaceTab")||Os)),[l]),{0:ie,1:re}=(0,i.useState)(Os),se=(0,i.useRef)(!0);(0,i.useEffect)((()=>{const e=ne();re(e)}),[ne]),(0,i.useEffect)((()=>{l&&re(l)}),[l]),(0,i.useEffect)((()=>{j(`/?tab=${ie}`),window.localStorage.setItem("workspaceTab",ie)}),[ie,j]);const{user:ae,loading:le,error:de,activeMembership:ce}=(0,i.useContext)(k.Z),{priceType:pe,isPastDue:ue,remainingTomeCreationsForOrg:ge}=(0,D.Z)(),me=!pe,he=!le&&me,fe=!he&&!le&&ue;if((0,i.useEffect)((()=>{(0,L.A)(g.RAW_VALUES_LEGACY.background)}),[g]),(0,i.useEffect)((()=>{const e=document.getElementById("intercom-positioner-tree");e&&(e.hidden=!0)}),[]),(0,i.useEffect)((()=>{var e,t;if(le)return;se.current&&(se.current=!1,E.z.reportWorkspacePresence(y,w));const n=null===ce||void 0===ce||null===(e=ce.org)||void 0===e?void 0:e.slug;if(n&&n!==(null===(t=C.query.slug)||void 0===t?void 0:t[0])){const e={};C.query.redeem_referral&&(e.referralStatus="false"),C.replace({pathname:n,query:e})}}),[le,y,w,null===ce||void 0===ce||null===(t=ce.org)||void 0===t?void 0:t.slug,C]),(0,i.useEffect)((()=>{le||N.ZP.reportPageView({apolloClient:y,pageName:N.Xw.WORKSPACE})}),[y,le]),!le&&!ae)return de?null:(0,P.jsx)(O.Z,{});if(!le&&(null===ce||void 0===ce||!ce.org)&&0===H)return(0,P.jsx)(_,{email:null===ae||void 0===ae?void 0:ae.email});const be=[{id:_s.RECENT,text:ee("workspace.sidebarTabLabel.recent"),icon:"workspace-recent",mobile:!0,component:st}];null!==ce&&void 0!==ce&&ce.org&&be.push({id:_s.CREATED,text:ee("workspace.sidebarTabLabel.personal"),icon:"workspace-created",mobile:!0,component:rt}),be.push({id:_s.SHARED,text:ee("workspace.sidebarTabLabel.sharedWithMe"),icon:"workspace-shared",mobile:!0,component:nt}),null!==ce&&void 0!==ce&&ce.org&&(be.push({id:_s.ORG,text:ce.org.name,icon:"workspace-org",mobile:!0,component:ot}),be.push({id:_s.DELETED,text:ee("workspace.sidebarTabLabel.deleted"),icon:"workspace-deleted",mobile:!1,component:it}));const xe=(be.filter((e=>e.id===ie))[0]||be[0]).component,ve=(0,P.jsx)(xe,{numTomesPerPage:16,numTomesInitial:16,loading:le,orgId:null===ce||void 0===ce||null===(n=ce.org)||void 0===n?void 0:n.id,userId:null===ae||void 0===ae?void 0:ae.id,isMobile:p,upgradeEligible:me});return(0,P.jsx)(u.Z,{activeBodyTheme:!0,children:(0,P.jsxs)(Je.Ac,{children:[!p&&he&&(0,P.jsx)(Cs,{remainingTomeCreationsForOrg:ge}),!p&&fe&&(0,P.jsx)(Ps,{}),(0,P.jsxs)(Je.di,{children:[!p&&(0,P.jsx)(gs,{isNotificationOpen:Q,setIsNotificationOpen:J,setIsQRCodeOpen:V,notificationMenuRef:K,tabs:be,selectedTab:ie,openSettings:$}),!p&&(0,P.jsx)(I.u_,{open:U,onOpenChange:e=>W(e),children:(0,P.jsx)(ts,{baseFrontendUrl:Is})}),!p&&(0,P.jsx)(I.u_,{open:q,onOpenChange:e=>V(e),children:(0,P.jsx)(En,{})}),(0,P.jsxs)(Je.N,{suppressHydrationWarning:!0,onClick:()=>{J(!1)},children:[p&&(0,P.jsx)(Vt,{orgName:null===ce||void 0===ce||null===(r=ce.org)||void 0===r?void 0:r.name,tabs:be.filter((e=>e.mobile)),selectedTab:ie}),!le&&ve]}),!p&&(0,P.jsx)(x.W,{children:(0,P.jsx)(v.Z,{})}),!p&&!le&&(0,P.jsx)(On,{style:te,perPage:6,isNotificationOpen:Q,setIsNotificationOpen:J}),(0,P.jsx)(T.Z,{subscribeTo:M.vc}),(0,P.jsx)(S.Bo,{isOpen:A,onClose:()=>F(!1)}),(0,P.jsx)(S.n,{})]})]})})},Ss=n(57451),Zs=!0;function Es(e){let{ssrLoadingTheme:t,ssrTome:n,isMobileFromUA:i,isBot:h,preloadFontData:f}=e;const{apolloClient:b}=(0,m.bp)(),x=(0,r.sJ)(c.Z),{query:{slug:v,tab:y}}=(0,s.useRouter)(),[w,j]=(0,l.tt)(v||"");let C;if(j){var _,O;const e=b.cache.readFragment({id:`Tome:${j}`,fragment:d.BMc,fragmentName:"TomeFirstPageTheme"}),t=null===e||void 0===e||null===(_=e.pages)||void 0===_||null===(O=_[0])||void 0===O?void 0:O.theme;t&&(C=t)}const I=(0,Ss.Z)();if(j||x){if(!I)return(0,P.jsx)(u.Z,{theme:t,preloadFontData:f,loadFonts:!0,children:(0,P.jsx)(g.Z,{})});const e=C||t||p.V6;let r;return r=(null===n||void 0===n?void 0:n.id)===j?n:null,o.v.startView("tome"),(0,P.jsx)(a.E,{id:j,preferCache:x,fetchFullPage:!0,isBot:h,isMobileFromUA:i,ssrTome:r,preloadFontData:f,loadingTheme:x?p.V6:e})}return w?(0,P.jsx)(ks,{isMobile:i,initialSelectedTab:(null===y||void 0===y?void 0:y.toString())||""}):null}const Ns={unstable_excludeFiles:["node_modules/jsdom/**/*"]}},50881:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[...slug]",function(){return n(81226)}])}},function(e){e.O(0,[9774,4027,2563,630,1272,8700,3285,5675,4827,8354,8378,7536,2219,6665,2405,3967,7329,58,1585,2906,1249,3647,3319,2888,179],(function(){return t=50881,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
